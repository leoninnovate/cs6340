<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type"
content="text/html; charset=iso-8859-1" />
<meta name="GENERATOR" content="GNU source-highlight 1.9
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite" />
<title>../src/jpeglib.h</title>
</head>
<body style="background-color: #FFFFFF; color: #000000; a: #0000EE; a.visited: #551A8B; a.active: #FF0000">
<pre>
<tt>
<a name="line1">0001: </a><span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line2">0002: </a><span style="font-style: italic"><span style="color: #9A1900"> * jpeglib.h</span></span>
<a name="line3">0003: </a><span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<a name="line4">0004: </a><span style="font-style: italic"><span style="color: #9A1900"> * Copyright (C) 1991-1998, Thomas G. Lane.</span></span>
<a name="line5">0005: </a><span style="font-style: italic"><span style="color: #9A1900"> * This file is part of the Independent JPEG Group's software.</span></span>
<a name="line6">0006: </a><span style="font-style: italic"><span style="color: #9A1900"> * For conditions of distribution and use, see the accompanying README file.</span></span>
<a name="line7">0007: </a><span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<a name="line8">0008: </a><span style="font-style: italic"><span style="color: #9A1900"> * This file defines the application interface for the JPEG library.</span></span>
<a name="line9">0009: </a><span style="font-style: italic"><span style="color: #9A1900"> * Most applications using the library need only include this file,</span></span>
<a name="line10">0010: </a><span style="font-style: italic"><span style="color: #9A1900"> * and perhaps jerror.h if they want to know the exact error codes.</span></span>
<a name="line11">0011: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line12">0012: </a>
<a name="line13">0013: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> JPEGLIB_H
<a name="line14">0014: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEGLIB_H
<a name="line15">0015: </a>
<a name="line16">0016: </a><span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line17">0017: </a><span style="font-style: italic"><span style="color: #9A1900"> * First we include the configuration files that record how this</span></span>
<a name="line18">0018: </a><span style="font-style: italic"><span style="color: #9A1900"> * installation of the JPEG library is set up.  jconfig.h can be</span></span>
<a name="line19">0019: </a><span style="font-style: italic"><span style="color: #9A1900"> * generated automatically for many systems.  jmorecfg.h contains</span></span>
<a name="line20">0020: </a><span style="font-style: italic"><span style="color: #9A1900"> * manual configuration options that most people need not worry about.</span></span>
<a name="line21">0021: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line22">0022: </a>
<a name="line23">0023: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> JCONFIG_INCLUDED        <span style="font-style: italic"><span style="color: #9A1900">/* in case jinclude.h already did */</span></span>
<a name="line24">0024: </a><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"jconfig.h"</span>              <span style="font-style: italic"><span style="color: #9A1900">/* widely used configuration options */</span></span>
<a name="line25">0025: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line26">0026: </a><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"jmorecfg.h"</span>             <span style="font-style: italic"><span style="color: #9A1900">/* seldom changed options */</span></span>
<a name="line27">0027: </a>
<a name="line28">0028: </a>
<a name="line29">0029: </a><span style="font-style: italic"><span style="color: #9A1900">/* Version ID for the JPEG library.</span></span>
<a name="line30">0030: </a><span style="font-style: italic"><span style="color: #9A1900"> * Might be useful for tests like "#if JPEG_LIB_VERSION &gt;= 60".</span></span>
<a name="line31">0031: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line32">0032: </a>
<a name="line33">0033: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_LIB_VERSION  <span style="color: #993399">62</span>    <span style="font-style: italic"><span style="color: #9A1900">/* Version 6b */</span></span>
<a name="line34">0034: </a>
<a name="line35">0035: </a>
<a name="line36">0036: </a><span style="font-style: italic"><span style="color: #9A1900">/* Various constants determining the sizes of things.</span></span>
<a name="line37">0037: </a><span style="font-style: italic"><span style="color: #9A1900"> * All of these are specified by the JPEG standard, so don't change them</span></span>
<a name="line38">0038: </a><span style="font-style: italic"><span style="color: #9A1900"> * if you want to be compatible.</span></span>
<a name="line39">0039: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line40">0040: </a>
<a name="line41">0041: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> DCTSIZE             <span style="color: #993399">8</span>   <span style="font-style: italic"><span style="color: #9A1900">/* The basic DCT block is 8x8 samples */</span></span>
<a name="line42">0042: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> DCTSIZE2            <span style="color: #993399">64</span>  <span style="font-style: italic"><span style="color: #9A1900">/* DCTSIZE squared; # of elements in a block */</span></span>
<a name="line43">0043: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> NUM_QUANT_TBLS      <span style="color: #993399">4</span>   <span style="font-style: italic"><span style="color: #9A1900">/* Quantization tables are numbered 0..3 */</span></span>
<a name="line44">0044: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> NUM_HUFF_TBLS       <span style="color: #993399">4</span>   <span style="font-style: italic"><span style="color: #9A1900">/* Huffman tables are numbered 0..3 */</span></span>
<a name="line45">0045: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> NUM_ARITH_TBLS      <span style="color: #993399">16</span>  <span style="font-style: italic"><span style="color: #9A1900">/* Arith-coding tables are numbered 0..15 */</span></span>
<a name="line46">0046: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> MAX_COMPS_IN_SCAN   <span style="color: #993399">4</span>   <span style="font-style: italic"><span style="color: #9A1900">/* JPEG limit on # of components in one scan */</span></span>
<a name="line47">0047: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> MAX_SAMP_FACTOR     <span style="color: #993399">4</span>   <span style="font-style: italic"><span style="color: #9A1900">/* JPEG limit on sampling factors */</span></span>
<a name="line48">0048: </a><span style="font-style: italic"><span style="color: #9A1900">/* Unfortunately, some bozo at Adobe saw no reason to be bound by the standard;</span></span>
<a name="line49">0049: </a><span style="font-style: italic"><span style="color: #9A1900"> * the PostScript DCT filter can emit files with many more than 10 blocks/MCU.</span></span>
<a name="line50">0050: </a><span style="font-style: italic"><span style="color: #9A1900"> * If you happen to run across such a file, you can up D_MAX_BLOCKS_IN_MCU</span></span>
<a name="line51">0051: </a><span style="font-style: italic"><span style="color: #9A1900"> * to handle it.  We even let you do this from the jconfig.h file.  However,</span></span>
<a name="line52">0052: </a><span style="font-style: italic"><span style="color: #9A1900"> * we strongly discourage changing C_MAX_BLOCKS_IN_MCU; just because Adobe</span></span>
<a name="line53">0053: </a><span style="font-style: italic"><span style="color: #9A1900"> * sometimes emits noncompliant files doesn't mean you should too.</span></span>
<a name="line54">0054: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line55">0055: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> C_MAX_BLOCKS_IN_MCU   <span style="color: #993399">10</span> <span style="font-style: italic"><span style="color: #9A1900">/* compressor's limit on blocks per MCU */</span></span>
<a name="line56">0056: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> D_MAX_BLOCKS_IN_MCU
<a name="line57">0057: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> D_MAX_BLOCKS_IN_MCU   <span style="color: #993399">10</span> <span style="font-style: italic"><span style="color: #9A1900">/* decompressor's limit on blocks per MCU */</span></span>
<a name="line58">0058: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line59">0059: </a>
<a name="line60">0060: </a>
<a name="line61">0061: </a><span style="font-style: italic"><span style="color: #9A1900">/* Data structures for images (arrays of samples and of DCT coefficients).</span></span>
<a name="line62">0062: </a><span style="font-style: italic"><span style="color: #9A1900"> * On 80x86 machines, the image arrays are too big for near pointers,</span></span>
<a name="line63">0063: </a><span style="font-style: italic"><span style="color: #9A1900"> * but the pointer arrays can fit in near memory.</span></span>
<a name="line64">0064: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line65">0065: </a>
<a name="line66">0066: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JSAMPLE FAR <span style="color: #990000">*</span>JSAMPROW<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* ptr to one image row of pixel samples. */</span></span>
<a name="line67">0067: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JSAMPROW <span style="color: #990000">*</span>JSAMPARRAY<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* ptr to some rows (a 2-D sample array) */</span></span>
<a name="line68">0068: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JSAMPARRAY <span style="color: #990000">*</span>JSAMPIMAGE<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* a 3-D sample array: top index is color */</span></span>
<a name="line69">0069: </a>
<a name="line70">0070: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JCOEF JBLOCK<span style="color: #990000">[</span>DCTSIZE2<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* one block of coefficients */</span></span>
<a name="line71">0071: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JBLOCK FAR <span style="color: #990000">*</span>JBLOCKROW<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* pointer to one row of coefficient blocks */</span></span>
<a name="line72">0072: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JBLOCKROW <span style="color: #990000">*</span>JBLOCKARRAY<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* a 2-D array of coefficient blocks */</span></span>
<a name="line73">0073: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JBLOCKARRAY <span style="color: #990000">*</span>JBLOCKIMAGE<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* a 3-D array of coefficient blocks */</span></span>
<a name="line74">0074: </a>
<a name="line75">0075: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> JCOEF FAR <span style="color: #990000">*</span>JCOEFPTR<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* useful in a couple of places */</span></span>
<a name="line76">0076: </a>
<a name="line77">0077: </a>
<a name="line78">0078: </a><span style="font-style: italic"><span style="color: #9A1900">/* Types for JPEG compression parameters and working tables. */</span></span>
<a name="line79">0079: </a>
<a name="line80">0080: </a>
<a name="line81">0081: </a><span style="font-style: italic"><span style="color: #9A1900">/* DCT coefficient quantization tables. */</span></span>
<a name="line82">0082: </a>
<a name="line83">0083: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #FF0000">{</span>
<a name="line84">0084: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* This array gives the coefficient quantizers in natural array order</span></span>
<a name="line85">0085: </a><span style="font-style: italic"><span style="color: #9A1900">   * (not the zigzag order in which they are stored in a JPEG DQT marker).</span></span>
<a name="line86">0086: </a><span style="font-style: italic"><span style="color: #9A1900">   * CAUTION: IJG versions prior to v6a kept this array in zigzag order.</span></span>
<a name="line87">0087: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line88">0088: </a>  UINT16 quantval<span style="color: #990000">[</span>DCTSIZE2<span style="color: #990000">]</span><span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* quantization step for each coefficient */</span></span>
<a name="line89">0089: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* This field is used only during compression.  It's initialized FALSE when</span></span>
<a name="line90">0090: </a><span style="font-style: italic"><span style="color: #9A1900">   * the table is created, and set TRUE when it's been output to the file.</span></span>
<a name="line91">0091: </a><span style="font-style: italic"><span style="color: #9A1900">   * You could suppress output of a table by setting this to TRUE.</span></span>
<a name="line92">0092: </a><span style="font-style: italic"><span style="color: #9A1900">   * (See jpeg_suppress_tables for an example.)</span></span>
<a name="line93">0093: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line94">0094: </a>  boolean sent_table<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* TRUE when table has been output */</span></span>
<a name="line95">0095: </a><span style="color: #FF0000">}</span> JQUANT_TBL<span style="color: #990000">;</span>
<a name="line96">0096: </a>
<a name="line97">0097: </a>
<a name="line98">0098: </a><span style="font-style: italic"><span style="color: #9A1900">/* Huffman coding tables. */</span></span>
<a name="line99">0099: </a>
<a name="line100">0100: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #FF0000">{</span>
<a name="line101">0101: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These two fields directly represent the contents of a JPEG DHT marker */</span></span>
<a name="line102">0102: </a>  UINT8 bits<span style="color: #990000">[</span><span style="color: #993399">17</span><span style="color: #990000">]</span><span style="color: #990000">;</span>               <span style="font-style: italic"><span style="color: #9A1900">/* bits[k] = # of symbols with codes of */</span></span>
<a name="line103">0103: </a>                                <span style="font-style: italic"><span style="color: #9A1900">/* length k bits; bits[0] is unused */</span></span>
<a name="line104">0104: </a>  UINT8 huffval<span style="color: #990000">[</span><span style="color: #993399">256</span><span style="color: #990000">]</span><span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* The symbols, in order of incr code length */</span></span>
<a name="line105">0105: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* This field is used only during compression.  It's initialized FALSE when</span></span>
<a name="line106">0106: </a><span style="font-style: italic"><span style="color: #9A1900">   * the table is created, and set TRUE when it's been output to the file.</span></span>
<a name="line107">0107: </a><span style="font-style: italic"><span style="color: #9A1900">   * You could suppress output of a table by setting this to TRUE.</span></span>
<a name="line108">0108: </a><span style="font-style: italic"><span style="color: #9A1900">   * (See jpeg_suppress_tables for an example.)</span></span>
<a name="line109">0109: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line110">0110: </a>  boolean sent_table<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* TRUE when table has been output */</span></span>
<a name="line111">0111: </a><span style="color: #FF0000">}</span> JHUFF_TBL<span style="color: #990000">;</span>
<a name="line112">0112: </a>
<a name="line113">0113: </a>
<a name="line114">0114: </a><span style="font-style: italic"><span style="color: #9A1900">/* Basic info about one component (color channel). */</span></span>
<a name="line115">0115: </a>
<a name="line116">0116: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #FF0000">{</span>
<a name="line117">0117: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These values are fixed over the whole image. */</span></span>
<a name="line118">0118: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* For compression, they must be supplied by parameter setup; */</span></span>
<a name="line119">0119: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* for decompression, they are read from the SOF marker. */</span></span>
<a name="line120">0120: </a>  <span style="color: #009900">int</span> component_id<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* identifier for this component (0..255) */</span></span>
<a name="line121">0121: </a>  <span style="color: #009900">int</span> component_index<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* its index in SOF or cinfo-&gt;comp_info[] */</span></span>
<a name="line122">0122: </a>  <span style="color: #009900">int</span> h_samp_factor<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* horizontal sampling factor (1..4) */</span></span>
<a name="line123">0123: </a>  <span style="color: #009900">int</span> v_samp_factor<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* vertical sampling factor (1..4) */</span></span>
<a name="line124">0124: </a>  <span style="color: #009900">int</span> quant_tbl_no<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* quantization table selector (0..3) */</span></span>
<a name="line125">0125: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These values may vary between scans. */</span></span>
<a name="line126">0126: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* For compression, they must be supplied by parameter setup; */</span></span>
<a name="line127">0127: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* for decompression, they are read from the SOS marker. */</span></span>
<a name="line128">0128: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The decompressor output side may not use these variables. */</span></span>
<a name="line129">0129: </a>  <span style="color: #009900">int</span> dc_tbl_no<span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">/* DC entropy table selector (0..3) */</span></span>
<a name="line130">0130: </a>  <span style="color: #009900">int</span> ac_tbl_no<span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">/* AC entropy table selector (0..3) */</span></span>
<a name="line131">0131: </a>  
<a name="line132">0132: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Remaining fields should be treated as private by applications. */</span></span>
<a name="line133">0133: </a>  
<a name="line134">0134: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These values are computed during compression or decompression startup: */</span></span>
<a name="line135">0135: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Component's size in DCT blocks.</span></span>
<a name="line136">0136: </a><span style="font-style: italic"><span style="color: #9A1900">   * Any dummy blocks added to complete an MCU are not counted; therefore</span></span>
<a name="line137">0137: </a><span style="font-style: italic"><span style="color: #9A1900">   * these values do not depend on whether a scan is interleaved or not.</span></span>
<a name="line138">0138: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line139">0139: </a>  JDIMENSION width_in_blocks<span style="color: #990000">;</span>
<a name="line140">0140: </a>  JDIMENSION height_in_blocks<span style="color: #990000">;</span>
<a name="line141">0141: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Size of a DCT block in samples.  Always DCTSIZE for compression.</span></span>
<a name="line142">0142: </a><span style="font-style: italic"><span style="color: #9A1900">   * For decompression this is the size of the output from one DCT block,</span></span>
<a name="line143">0143: </a><span style="font-style: italic"><span style="color: #9A1900">   * reflecting any scaling we choose to apply during the IDCT step.</span></span>
<a name="line144">0144: </a><span style="font-style: italic"><span style="color: #9A1900">   * Values of 1,2,4,8 are likely to be supported.  Note that different</span></span>
<a name="line145">0145: </a><span style="font-style: italic"><span style="color: #9A1900">   * components may receive different IDCT scalings.</span></span>
<a name="line146">0146: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line147">0147: </a>  <span style="color: #009900">int</span> DCT_scaled_size<span style="color: #990000">;</span>
<a name="line148">0148: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The downsampled dimensions are the component's actual, unpadded number</span></span>
<a name="line149">0149: </a><span style="font-style: italic"><span style="color: #9A1900">   * of samples at the main buffer (preprocessing/compression interface), thus</span></span>
<a name="line150">0150: </a><span style="font-style: italic"><span style="color: #9A1900">   * downsampled_width = ceil(image_width * Hi/Hmax)</span></span>
<a name="line151">0151: </a><span style="font-style: italic"><span style="color: #9A1900">   * and similarly for height.  For decompression, IDCT scaling is included, so</span></span>
<a name="line152">0152: </a><span style="font-style: italic"><span style="color: #9A1900">   * downsampled_width = ceil(image_width * Hi/Hmax * DCT_scaled_size/DCTSIZE)</span></span>
<a name="line153">0153: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line154">0154: </a>  JDIMENSION downsampled_width<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* actual width in samples */</span></span>
<a name="line155">0155: </a>  JDIMENSION downsampled_height<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* actual height in samples */</span></span>
<a name="line156">0156: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* This flag is used only for decompression.  In cases where some of the</span></span>
<a name="line157">0157: </a><span style="font-style: italic"><span style="color: #9A1900">   * components will be ignored (eg grayscale output from YCbCr image),</span></span>
<a name="line158">0158: </a><span style="font-style: italic"><span style="color: #9A1900">   * we can skip most computations for the unused components.</span></span>
<a name="line159">0159: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line160">0160: </a>  boolean component_needed<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* do we need the value of this component? */</span></span>
<a name="line161">0161: </a>
<a name="line162">0162: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These values are computed before starting a scan of the component. */</span></span>
<a name="line163">0163: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The decompressor output side may not use these variables. */</span></span>
<a name="line164">0164: </a>  <span style="color: #009900">int</span> MCU_width<span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">/* number of blocks per MCU, horizontally */</span></span>
<a name="line165">0165: </a>  <span style="color: #009900">int</span> MCU_height<span style="color: #990000">;</span>               <span style="font-style: italic"><span style="color: #9A1900">/* number of blocks per MCU, vertically */</span></span>
<a name="line166">0166: </a>  <span style="color: #009900">int</span> MCU_blocks<span style="color: #990000">;</span>               <span style="font-style: italic"><span style="color: #9A1900">/* MCU_width * MCU_height */</span></span>
<a name="line167">0167: </a>  <span style="color: #009900">int</span> MCU_sample_width<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* MCU width in samples, MCU_width*DCT_scaled_size */</span></span>
<a name="line168">0168: </a>  <span style="color: #009900">int</span> last_col_width<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* # of non-dummy blocks across in last MCU */</span></span>
<a name="line169">0169: </a>  <span style="color: #009900">int</span> last_row_height<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* # of non-dummy blocks down in last MCU */</span></span>
<a name="line170">0170: </a>
<a name="line171">0171: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Saved quantization table for component; NULL if none yet saved.</span></span>
<a name="line172">0172: </a><span style="font-style: italic"><span style="color: #9A1900">   * See jdinput.c comments about the need for this information.</span></span>
<a name="line173">0173: </a><span style="font-style: italic"><span style="color: #9A1900">   * This field is currently used only for decompression.</span></span>
<a name="line174">0174: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line175">0175: </a>  JQUANT_TBL <span style="color: #990000">*</span> quant_table<span style="color: #990000">;</span>
<a name="line176">0176: </a>
<a name="line177">0177: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Private per-component storage for DCT or IDCT subsystem. */</span></span>
<a name="line178">0178: </a>  <span style="color: #009900">void</span> <span style="color: #990000">*</span> dct_table<span style="color: #990000">;</span>
<a name="line179">0179: </a><span style="color: #FF0000">}</span> jpeg_component_info<span style="color: #990000">;</span>
<a name="line180">0180: </a>
<a name="line181">0181: </a>
<a name="line182">0182: </a><span style="font-style: italic"><span style="color: #9A1900">/* The script for encoding a multiple-scan file is an array of these: */</span></span>
<a name="line183">0183: </a>
<a name="line184">0184: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> <span style="color: #FF0000">{</span>
<a name="line185">0185: </a>  <span style="color: #009900">int</span> comps_in_scan<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* number of components encoded in this scan */</span></span>
<a name="line186">0186: </a>  <span style="color: #009900">int</span> component_index<span style="color: #990000">[</span>MAX_COMPS_IN_SCAN<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* their SOF/comp_info[] indexes */</span></span>
<a name="line187">0187: </a>  <span style="color: #009900">int</span> Ss<span style="color: #990000">,</span> Se<span style="color: #990000">;</span>                   <span style="font-style: italic"><span style="color: #9A1900">/* progressive JPEG spectral selection parms */</span></span>
<a name="line188">0188: </a>  <span style="color: #009900">int</span> Ah<span style="color: #990000">,</span> Al<span style="color: #990000">;</span>                   <span style="font-style: italic"><span style="color: #9A1900">/* progressive JPEG successive approx. parms */</span></span>
<a name="line189">0189: </a><span style="color: #FF0000">}</span> jpeg_scan_info<span style="color: #990000">;</span>
<a name="line190">0190: </a>
<a name="line191">0191: </a><span style="font-style: italic"><span style="color: #9A1900">/* The decompressor can save APPn and COM markers in a list of these: */</span></span>
<a name="line192">0192: </a>
<a name="line193">0193: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_struct FAR <span style="color: #990000">*</span> jpeg_saved_marker_ptr<span style="color: #990000">;</span>
<a name="line194">0194: </a>
<a name="line195">0195: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_struct <span style="color: #FF0000">{</span>
<a name="line196">0196: </a>  jpeg_saved_marker_ptr next<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* next in list, or NULL */</span></span>
<a name="line197">0197: </a>  UINT8 marker<span style="color: #990000">;</span>                 <span style="font-style: italic"><span style="color: #9A1900">/* marker code: JPEG_COM, or JPEG_APP0+n */</span></span>
<a name="line198">0198: </a>  <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> original_length<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* # bytes of data in the file */</span></span>
<a name="line199">0199: </a>  <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> data_length<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* # bytes of data saved at data[] */</span></span>
<a name="line200">0200: </a>  JOCTET FAR <span style="color: #990000">*</span> data<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* the data contained in the marker */</span></span>
<a name="line201">0201: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* the marker length word is not counted in data_length or original_length */</span></span>
<a name="line202">0202: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line203">0203: </a>
<a name="line204">0204: </a><span style="font-style: italic"><span style="color: #9A1900">/* Known color spaces. */</span></span>
<a name="line205">0205: </a>
<a name="line206">0206: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">enum</span></span> <span style="color: #FF0000">{</span>
<a name="line207">0207: </a>        JCS_UNKNOWN<span style="color: #990000">,</span>            <span style="font-style: italic"><span style="color: #9A1900">/* error/unspecified */</span></span>
<a name="line208">0208: </a>        JCS_GRAYSCALE<span style="color: #990000">,</span>          <span style="font-style: italic"><span style="color: #9A1900">/* monochrome */</span></span>
<a name="line209">0209: </a>        JCS_RGB<span style="color: #990000">,</span>                <span style="font-style: italic"><span style="color: #9A1900">/* red/green/blue */</span></span>
<a name="line210">0210: </a>        JCS_YCbCr<span style="color: #990000">,</span>              <span style="font-style: italic"><span style="color: #9A1900">/* Y/Cb/Cr (also known as YUV) */</span></span>
<a name="line211">0211: </a>        JCS_CMYK<span style="color: #990000">,</span>               <span style="font-style: italic"><span style="color: #9A1900">/* C/M/Y/K */</span></span>
<a name="line212">0212: </a>        JCS_YCCK                <span style="font-style: italic"><span style="color: #9A1900">/* Y/Cb/Cr/K */</span></span>
<a name="line213">0213: </a><span style="color: #FF0000">}</span> J_COLOR_SPACE<span style="color: #990000">;</span>
<a name="line214">0214: </a>
<a name="line215">0215: </a><span style="font-style: italic"><span style="color: #9A1900">/* DCT/IDCT algorithm options. */</span></span>
<a name="line216">0216: </a>
<a name="line217">0217: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">enum</span></span> <span style="color: #FF0000">{</span>
<a name="line218">0218: </a>        JDCT_ISLOW<span style="color: #990000">,</span>             <span style="font-style: italic"><span style="color: #9A1900">/* slow but accurate integer algorithm */</span></span>
<a name="line219">0219: </a>        JDCT_IFAST<span style="color: #990000">,</span>             <span style="font-style: italic"><span style="color: #9A1900">/* faster, less accurate integer method */</span></span>
<a name="line220">0220: </a>        JDCT_FLOAT              <span style="font-style: italic"><span style="color: #9A1900">/* floating-point: accurate, fast on fast HW */</span></span>
<a name="line221">0221: </a><span style="color: #FF0000">}</span> J_DCT_METHOD<span style="color: #990000">;</span>
<a name="line222">0222: </a>
<a name="line223">0223: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> JDCT_DEFAULT            <span style="font-style: italic"><span style="color: #9A1900">/* may be overridden in jconfig.h */</span></span>
<a name="line224">0224: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JDCT_DEFAULT  JDCT_ISLOW
<a name="line225">0225: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line226">0226: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> JDCT_FASTEST            <span style="font-style: italic"><span style="color: #9A1900">/* may be overridden in jconfig.h */</span></span>
<a name="line227">0227: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JDCT_FASTEST  JDCT_IFAST
<a name="line228">0228: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line229">0229: </a>
<a name="line230">0230: </a><span style="font-style: italic"><span style="color: #9A1900">/* Dithering options for decompression. */</span></span>
<a name="line231">0231: </a>
<a name="line232">0232: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">enum</span></span> <span style="color: #FF0000">{</span>
<a name="line233">0233: </a>        JDITHER_NONE<span style="color: #990000">,</span>           <span style="font-style: italic"><span style="color: #9A1900">/* no dithering */</span></span>
<a name="line234">0234: </a>        JDITHER_ORDERED<span style="color: #990000">,</span>        <span style="font-style: italic"><span style="color: #9A1900">/* simple ordered dither */</span></span>
<a name="line235">0235: </a>        JDITHER_FS              <span style="font-style: italic"><span style="color: #9A1900">/* Floyd-Steinberg error diffusion dither */</span></span>
<a name="line236">0236: </a><span style="color: #FF0000">}</span> J_DITHER_MODE<span style="color: #990000">;</span>
<a name="line237">0237: </a>
<a name="line238">0238: </a>
<a name="line239">0239: </a><span style="font-style: italic"><span style="color: #9A1900">/* Common fields between JPEG compression and decompression master structs. */</span></span>
<a name="line240">0240: </a>
<a name="line241">0241: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_common_fields <span style="color: #990000">\</span>
<a name="line242">0242: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_error_mgr <span style="color: #990000">*</span> err<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* Error handler module */</span></span><span style="color: #990000">\</span>
<a name="line243">0243: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_memory_mgr <span style="color: #990000">*</span> mem<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Memory manager module */</span></span><span style="color: #990000">\</span>
<a name="line244">0244: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_progress_mgr <span style="color: #990000">*</span> progress<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Progress monitor, or NULL if none */</span></span><span style="color: #990000">\</span>
<a name="line245">0245: </a>  <span style="color: #009900">void</span> <span style="color: #990000">*</span> client_data<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* Available for use by application */</span></span><span style="color: #990000">\</span>
<a name="line246">0246: </a>  boolean is_decompressor<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* So common code can tell which is which */</span></span><span style="color: #990000">\</span>
<a name="line247">0247: </a>  <span style="color: #009900">int</span> global_state              <span style="font-style: italic"><span style="color: #9A1900">/* For checking call sequence validity */</span></span>
<a name="line248">0248: </a>
<a name="line249">0249: </a><span style="font-style: italic"><span style="color: #9A1900">/* Routines that are to be used by both halves of the library are declared</span></span>
<a name="line250">0250: </a><span style="font-style: italic"><span style="color: #9A1900"> * to receive a pointer to this structure.  There are no actual instances of</span></span>
<a name="line251">0251: </a><span style="font-style: italic"><span style="color: #9A1900"> * jpeg_common_struct, only of jpeg_compress_struct and jpeg_decompress_struct.</span></span>
<a name="line252">0252: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line253">0253: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_common_struct <span style="color: #FF0000">{</span>
<a name="line254">0254: </a>  jpeg_common_fields<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* Fields common to both master struct types */</span></span>
<a name="line255">0255: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Additional fields follow in an actual jpeg_compress_struct or</span></span>
<a name="line256">0256: </a><span style="font-style: italic"><span style="color: #9A1900">   * jpeg_decompress_struct.  All three structs must agree on these</span></span>
<a name="line257">0257: </a><span style="font-style: italic"><span style="color: #9A1900">   * initial fields!  (This would be a lot cleaner in C++.)</span></span>
<a name="line258">0258: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line259">0259: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line260">0260: </a>
<a name="line261">0261: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_common_struct <span style="color: #990000">*</span> j_common_ptr<span style="color: #990000">;</span>
<a name="line262">0262: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_compress_struct <span style="color: #990000">*</span> j_compress_ptr<span style="color: #990000">;</span>
<a name="line263">0263: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_decompress_struct <span style="color: #990000">*</span> j_decompress_ptr<span style="color: #990000">;</span>
<a name="line264">0264: </a>
<a name="line265">0265: </a>
<a name="line266">0266: </a><span style="font-style: italic"><span style="color: #9A1900">/* Master record for a compression instance */</span></span>
<a name="line267">0267: </a>
<a name="line268">0268: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_compress_struct <span style="color: #FF0000">{</span>
<a name="line269">0269: </a>  jpeg_common_fields<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* Fields shared with jpeg_decompress_struct */</span></span>
<a name="line270">0270: </a>
<a name="line271">0271: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Destination for compressed data */</span></span>
<a name="line272">0272: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_destination_mgr <span style="color: #990000">*</span> dest<span style="color: #990000">;</span>
<a name="line273">0273: </a>
<a name="line274">0274: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Description of source image --- these fields must be filled in by</span></span>
<a name="line275">0275: </a><span style="font-style: italic"><span style="color: #9A1900">   * outer application before starting compression.  in_color_space must</span></span>
<a name="line276">0276: </a><span style="font-style: italic"><span style="color: #9A1900">   * be correct before you can even call jpeg_set_defaults().</span></span>
<a name="line277">0277: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line278">0278: </a>
<a name="line279">0279: </a>  JDIMENSION image_width<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* input image width */</span></span>
<a name="line280">0280: </a>  JDIMENSION image_height<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* input image height */</span></span>
<a name="line281">0281: </a>  <span style="color: #009900">int</span> input_components<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* # of color components in input image */</span></span>
<a name="line282">0282: </a>  J_COLOR_SPACE in_color_space<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* colorspace of input image */</span></span>
<a name="line283">0283: </a>
<a name="line284">0284: </a>  <span style="color: #009900">double</span> input_gamma<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* image gamma of input image */</span></span>
<a name="line285">0285: </a>
<a name="line286">0286: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Compression parameters --- these fields must be set before calling</span></span>
<a name="line287">0287: </a><span style="font-style: italic"><span style="color: #9A1900">   * jpeg_start_compress().  We recommend calling jpeg_set_defaults() to</span></span>
<a name="line288">0288: </a><span style="font-style: italic"><span style="color: #9A1900">   * initialize everything to reasonable defaults, then changing anything</span></span>
<a name="line289">0289: </a><span style="font-style: italic"><span style="color: #9A1900">   * the application specifically wants to change.  That way you won't get</span></span>
<a name="line290">0290: </a><span style="font-style: italic"><span style="color: #9A1900">   * burnt when new parameters are added.  Also note that there are several</span></span>
<a name="line291">0291: </a><span style="font-style: italic"><span style="color: #9A1900">   * helper routines to simplify changing parameters.</span></span>
<a name="line292">0292: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line293">0293: </a>
<a name="line294">0294: </a>  <span style="color: #009900">int</span> data_precision<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* bits of precision in image data */</span></span>
<a name="line295">0295: </a>
<a name="line296">0296: </a>  <span style="color: #009900">int</span> num_components<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* # of color components in JPEG image */</span></span>
<a name="line297">0297: </a>  J_COLOR_SPACE jpeg_color_space<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* colorspace of JPEG image */</span></span>
<a name="line298">0298: </a>
<a name="line299">0299: </a>  jpeg_component_info <span style="color: #990000">*</span> comp_info<span style="color: #990000">;</span>
<a name="line300">0300: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* comp_info[i] describes component that appears i'th in SOF */</span></span>
<a name="line301">0301: </a>  
<a name="line302">0302: </a>  JQUANT_TBL <span style="color: #990000">*</span> quant_tbl_ptrs<span style="color: #990000">[</span>NUM_QUANT_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line303">0303: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* ptrs to coefficient quantization tables, or NULL if not defined */</span></span>
<a name="line304">0304: </a>  
<a name="line305">0305: </a>  JHUFF_TBL <span style="color: #990000">*</span> dc_huff_tbl_ptrs<span style="color: #990000">[</span>NUM_HUFF_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line306">0306: </a>  JHUFF_TBL <span style="color: #990000">*</span> ac_huff_tbl_ptrs<span style="color: #990000">[</span>NUM_HUFF_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line307">0307: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* ptrs to Huffman coding tables, or NULL if not defined */</span></span>
<a name="line308">0308: </a>  
<a name="line309">0309: </a>  UINT8 arith_dc_L<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* L values for DC arith-coding tables */</span></span>
<a name="line310">0310: </a>  UINT8 arith_dc_U<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* U values for DC arith-coding tables */</span></span>
<a name="line311">0311: </a>  UINT8 arith_ac_K<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Kx values for AC arith-coding tables */</span></span>
<a name="line312">0312: </a>
<a name="line313">0313: </a>  <span style="color: #009900">int</span> num_scans<span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">/* # of entries in scan_info array */</span></span>
<a name="line314">0314: </a>  <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> jpeg_scan_info <span style="color: #990000">*</span> scan_info<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* script for multi-scan file, or NULL */</span></span>
<a name="line315">0315: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The default value of scan_info is NULL, which causes a single-scan</span></span>
<a name="line316">0316: </a><span style="font-style: italic"><span style="color: #9A1900">   * sequential JPEG file to be emitted.  To create a multi-scan file,</span></span>
<a name="line317">0317: </a><span style="font-style: italic"><span style="color: #9A1900">   * set num_scans and scan_info to point to an array of scan definitions.</span></span>
<a name="line318">0318: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line319">0319: </a>
<a name="line320">0320: </a>  boolean raw_data_in<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=caller supplies downsampled data */</span></span>
<a name="line321">0321: </a>  boolean arith_code<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=arithmetic coding, FALSE=Huffman */</span></span>
<a name="line322">0322: </a>  boolean optimize_coding<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=optimize entropy encoding parms */</span></span>
<a name="line323">0323: </a>  boolean CCIR601_sampling<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=first samples are cosited */</span></span>
<a name="line324">0324: </a>  <span style="color: #009900">int</span> smoothing_factor<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* 1..100, or 0 for no input smoothing */</span></span>
<a name="line325">0325: </a>  J_DCT_METHOD dct_method<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* DCT algorithm selector */</span></span>
<a name="line326">0326: </a>
<a name="line327">0327: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The restart interval can be specified in absolute MCUs by setting</span></span>
<a name="line328">0328: </a><span style="font-style: italic"><span style="color: #9A1900">   * restart_interval, or in MCU rows by setting restart_in_rows</span></span>
<a name="line329">0329: </a><span style="font-style: italic"><span style="color: #9A1900">   * (in which case the correct restart_interval will be figured</span></span>
<a name="line330">0330: </a><span style="font-style: italic"><span style="color: #9A1900">   * for each scan).</span></span>
<a name="line331">0331: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line332">0332: </a>  <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> restart_interval<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* MCUs per restart, or 0 for no restart */</span></span>
<a name="line333">0333: </a>  <span style="color: #009900">int</span> restart_in_rows<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* if &gt; 0, MCU rows per restart interval */</span></span>
<a name="line334">0334: </a>
<a name="line335">0335: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Parameters controlling emission of special markers. */</span></span>
<a name="line336">0336: </a>
<a name="line337">0337: </a>  boolean write_JFIF_header<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* should a JFIF marker be written? */</span></span>
<a name="line338">0338: </a>  UINT8 JFIF_major_version<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* What to write for the JFIF version number */</span></span>
<a name="line339">0339: </a>  UINT8 JFIF_minor_version<span style="color: #990000">;</span>
<a name="line340">0340: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These three values are not used by the JPEG code, merely copied */</span></span>
<a name="line341">0341: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* into the JFIF APP0 marker.  density_unit can be 0 for unknown, */</span></span>
<a name="line342">0342: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* 1 for dots/inch, or 2 for dots/cm.  Note that the pixel aspect */</span></span>
<a name="line343">0343: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* ratio is defined by X_density/Y_density even when density_unit=0. */</span></span>
<a name="line344">0344: </a>  UINT8 density_unit<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* JFIF code for pixel size units */</span></span>
<a name="line345">0345: </a>  UINT16 X_density<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* Horizontal pixel density */</span></span>
<a name="line346">0346: </a>  UINT16 Y_density<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* Vertical pixel density */</span></span>
<a name="line347">0347: </a>  boolean write_Adobe_marker<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* should an Adobe marker be written? */</span></span>
<a name="line348">0348: </a>  
<a name="line349">0349: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* State variable: index of next scanline to be written to</span></span>
<a name="line350">0350: </a><span style="font-style: italic"><span style="color: #9A1900">   * jpeg_write_scanlines().  Application may use this to control its</span></span>
<a name="line351">0351: </a><span style="font-style: italic"><span style="color: #9A1900">   * processing loop, e.g., "while (next_scanline &lt; image_height)".</span></span>
<a name="line352">0352: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line353">0353: </a>
<a name="line354">0354: </a>  JDIMENSION next_scanline<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* 0 .. image_height-1  */</span></span>
<a name="line355">0355: </a>
<a name="line356">0356: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Remaining fields are known throughout compressor, but generally</span></span>
<a name="line357">0357: </a><span style="font-style: italic"><span style="color: #9A1900">   * should not be touched by a surrounding application.</span></span>
<a name="line358">0358: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line359">0359: </a>
<a name="line360">0360: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line361">0361: </a><span style="font-style: italic"><span style="color: #9A1900">   * These fields are computed during compression startup</span></span>
<a name="line362">0362: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line363">0363: </a>  boolean progressive_mode<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* TRUE if scan script uses progressive mode */</span></span>
<a name="line364">0364: </a>  <span style="color: #009900">int</span> max_h_samp_factor<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* largest h_samp_factor */</span></span>
<a name="line365">0365: </a>  <span style="color: #009900">int</span> max_v_samp_factor<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* largest v_samp_factor */</span></span>
<a name="line366">0366: </a>
<a name="line367">0367: </a>  JDIMENSION total_iMCU_rows<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* # of iMCU rows to be input to coef ctlr */</span></span>
<a name="line368">0368: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The coefficient controller receives data in units of MCU rows as defined</span></span>
<a name="line369">0369: </a><span style="font-style: italic"><span style="color: #9A1900">   * for fully interleaved scans (whether the JPEG file is interleaved or not).</span></span>
<a name="line370">0370: </a><span style="font-style: italic"><span style="color: #9A1900">   * There are v_samp_factor * DCTSIZE sample rows of each component in an</span></span>
<a name="line371">0371: </a><span style="font-style: italic"><span style="color: #9A1900">   * "iMCU" (interleaved MCU) row.</span></span>
<a name="line372">0372: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line373">0373: </a>  
<a name="line374">0374: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line375">0375: </a><span style="font-style: italic"><span style="color: #9A1900">   * These fields are valid during any one scan.</span></span>
<a name="line376">0376: </a><span style="font-style: italic"><span style="color: #9A1900">   * They describe the components and MCUs actually appearing in the scan.</span></span>
<a name="line377">0377: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line378">0378: </a>  <span style="color: #009900">int</span> comps_in_scan<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* # of JPEG components in this scan */</span></span>
<a name="line379">0379: </a>  jpeg_component_info <span style="color: #990000">*</span> cur_comp_info<span style="color: #990000">[</span>MAX_COMPS_IN_SCAN<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line380">0380: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* *cur_comp_info[i] describes component that appears i'th in SOS */</span></span>
<a name="line381">0381: </a>  
<a name="line382">0382: </a>  JDIMENSION MCUs_per_row<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* # of MCUs across the image */</span></span>
<a name="line383">0383: </a>  JDIMENSION MCU_rows_in_scan<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* # of MCU rows in the image */</span></span>
<a name="line384">0384: </a>  
<a name="line385">0385: </a>  <span style="color: #009900">int</span> blocks_in_MCU<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* # of DCT blocks per MCU */</span></span>
<a name="line386">0386: </a>  <span style="color: #009900">int</span> MCU_membership<span style="color: #990000">[</span>C_MAX_BLOCKS_IN_MCU<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line387">0387: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* MCU_membership[i] is index in cur_comp_info of component owning */</span></span>
<a name="line388">0388: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* i'th block in an MCU */</span></span>
<a name="line389">0389: </a>
<a name="line390">0390: </a>  <span style="color: #009900">int</span> Ss<span style="color: #990000">,</span> Se<span style="color: #990000">,</span> Ah<span style="color: #990000">,</span> Al<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* progressive JPEG parameters for scan */</span></span>
<a name="line391">0391: </a>
<a name="line392">0392: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line393">0393: </a><span style="font-style: italic"><span style="color: #9A1900">   * Links to compression subobjects (methods and private variables of modules)</span></span>
<a name="line394">0394: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line395">0395: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_comp_master <span style="color: #990000">*</span> master<span style="color: #990000">;</span>
<a name="line396">0396: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_main_controller <span style="color: #990000">*</span> main<span style="color: #990000">;</span>
<a name="line397">0397: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_prep_controller <span style="color: #990000">*</span> prep<span style="color: #990000">;</span>
<a name="line398">0398: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_coef_controller <span style="color: #990000">*</span> coef<span style="color: #990000">;</span>
<a name="line399">0399: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_writer <span style="color: #990000">*</span> marker<span style="color: #990000">;</span>
<a name="line400">0400: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_converter <span style="color: #990000">*</span> cconvert<span style="color: #990000">;</span>
<a name="line401">0401: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_downsampler <span style="color: #990000">*</span> downsample<span style="color: #990000">;</span>
<a name="line402">0402: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_forward_dct <span style="color: #990000">*</span> fdct<span style="color: #990000">;</span>
<a name="line403">0403: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_entropy_encoder <span style="color: #990000">*</span> entropy<span style="color: #990000">;</span>
<a name="line404">0404: </a>  jpeg_scan_info <span style="color: #990000">*</span> script_space<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* workspace for jpeg_simple_progression */</span></span>
<a name="line405">0405: </a>  <span style="color: #009900">int</span> script_space_size<span style="color: #990000">;</span>
<a name="line406">0406: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line407">0407: </a>
<a name="line408">0408: </a>
<a name="line409">0409: </a><span style="font-style: italic"><span style="color: #9A1900">/* Master record for a decompression instance */</span></span>
<a name="line410">0410: </a>
<a name="line411">0411: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_decompress_struct <span style="color: #FF0000">{</span>
<a name="line412">0412: </a>  jpeg_common_fields<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* Fields shared with jpeg_compress_struct */</span></span>
<a name="line413">0413: </a>
<a name="line414">0414: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Source of compressed data */</span></span>
<a name="line415">0415: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_source_mgr <span style="color: #990000">*</span> src<span style="color: #990000">;</span>
<a name="line416">0416: </a>
<a name="line417">0417: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Basic description of image --- filled in by jpeg_read_header(). */</span></span>
<a name="line418">0418: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Application may inspect these values to decide how to process image. */</span></span>
<a name="line419">0419: </a>
<a name="line420">0420: </a>  JDIMENSION image_width<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* nominal image width (from SOF marker) */</span></span>
<a name="line421">0421: </a>  JDIMENSION image_height<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* nominal image height */</span></span>
<a name="line422">0422: </a>  <span style="color: #009900">int</span> num_components<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* # of color components in JPEG image */</span></span>
<a name="line423">0423: </a>  J_COLOR_SPACE jpeg_color_space<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* colorspace of JPEG image */</span></span>
<a name="line424">0424: </a>
<a name="line425">0425: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Decompression processing parameters --- these fields must be set before</span></span>
<a name="line426">0426: </a><span style="font-style: italic"><span style="color: #9A1900">   * calling jpeg_start_decompress().  Note that jpeg_read_header() initializes</span></span>
<a name="line427">0427: </a><span style="font-style: italic"><span style="color: #9A1900">   * them to default values.</span></span>
<a name="line428">0428: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line429">0429: </a>
<a name="line430">0430: </a>  J_COLOR_SPACE out_color_space<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* colorspace for output */</span></span>
<a name="line431">0431: </a>
<a name="line432">0432: </a>  <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> scale_num<span style="color: #990000">,</span> scale_denom<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* fraction by which to scale image */</span></span>
<a name="line433">0433: </a>
<a name="line434">0434: </a>  <span style="color: #009900">double</span> output_gamma<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* image gamma wanted in output */</span></span>
<a name="line435">0435: </a>
<a name="line436">0436: </a>  boolean buffered_image<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=multiple output passes */</span></span>
<a name="line437">0437: </a>  boolean raw_data_out<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=downsampled data wanted */</span></span>
<a name="line438">0438: </a>
<a name="line439">0439: </a>  J_DCT_METHOD dct_method<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* IDCT algorithm selector */</span></span>
<a name="line440">0440: </a>  boolean do_fancy_upsampling<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=apply fancy upsampling */</span></span>
<a name="line441">0441: </a>  boolean do_block_smoothing<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=apply interblock smoothing */</span></span>
<a name="line442">0442: </a>
<a name="line443">0443: </a>  boolean quantize_colors<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=colormapped output wanted */</span></span>
<a name="line444">0444: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* the following are ignored if not quantize_colors: */</span></span>
<a name="line445">0445: </a>  J_DITHER_MODE dither_mode<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* type of color dithering to use */</span></span>
<a name="line446">0446: </a>  boolean two_pass_quantize<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=use two-pass color quantization */</span></span>
<a name="line447">0447: </a>  <span style="color: #009900">int</span> desired_number_of_colors<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* max # colors to use in created colormap */</span></span>
<a name="line448">0448: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* these are significant only in buffered-image mode: */</span></span>
<a name="line449">0449: </a>  boolean enable_1pass_quant<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* enable future use of 1-pass quantizer */</span></span>
<a name="line450">0450: </a>  boolean enable_external_quant<span style="color: #990000">;</span><span style="font-style: italic"><span style="color: #9A1900">/* enable future use of external colormap */</span></span>
<a name="line451">0451: </a>  boolean enable_2pass_quant<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* enable future use of 2-pass quantizer */</span></span>
<a name="line452">0452: </a>
<a name="line453">0453: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Description of actual output image that will be returned to application.</span></span>
<a name="line454">0454: </a><span style="font-style: italic"><span style="color: #9A1900">   * These fields are computed by jpeg_start_decompress().</span></span>
<a name="line455">0455: </a><span style="font-style: italic"><span style="color: #9A1900">   * You can also use jpeg_calc_output_dimensions() to determine these values</span></span>
<a name="line456">0456: </a><span style="font-style: italic"><span style="color: #9A1900">   * in advance of calling jpeg_start_decompress().</span></span>
<a name="line457">0457: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line458">0458: </a>
<a name="line459">0459: </a>  JDIMENSION output_width<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* scaled image width */</span></span>
<a name="line460">0460: </a>  JDIMENSION output_height<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* scaled image height */</span></span>
<a name="line461">0461: </a>  <span style="color: #009900">int</span> out_color_components<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* # of color components in out_color_space */</span></span>
<a name="line462">0462: </a>  <span style="color: #009900">int</span> output_components<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* # of color components returned */</span></span>
<a name="line463">0463: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* output_components is 1 (a colormap index) when quantizing colors;</span></span>
<a name="line464">0464: </a><span style="font-style: italic"><span style="color: #9A1900">   * otherwise it equals out_color_components.</span></span>
<a name="line465">0465: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line466">0466: </a>  <span style="color: #009900">int</span> rec_outbuf_height<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* min recommended height of scanline buffer */</span></span>
<a name="line467">0467: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* If the buffer passed to jpeg_read_scanlines() is less than this many rows</span></span>
<a name="line468">0468: </a><span style="font-style: italic"><span style="color: #9A1900">   * high, space and time will be wasted due to unnecessary data copying.</span></span>
<a name="line469">0469: </a><span style="font-style: italic"><span style="color: #9A1900">   * Usually rec_outbuf_height will be 1 or 2, at most 4.</span></span>
<a name="line470">0470: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line471">0471: </a>
<a name="line472">0472: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* When quantizing colors, the output colormap is described by these fields.</span></span>
<a name="line473">0473: </a><span style="font-style: italic"><span style="color: #9A1900">   * The application can supply a colormap by setting colormap non-NULL before</span></span>
<a name="line474">0474: </a><span style="font-style: italic"><span style="color: #9A1900">   * calling jpeg_start_decompress; otherwise a colormap is created during</span></span>
<a name="line475">0475: </a><span style="font-style: italic"><span style="color: #9A1900">   * jpeg_start_decompress or jpeg_start_output.</span></span>
<a name="line476">0476: </a><span style="font-style: italic"><span style="color: #9A1900">   * The map has out_color_components rows and actual_number_of_colors columns.</span></span>
<a name="line477">0477: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line478">0478: </a>  <span style="color: #009900">int</span> actual_number_of_colors<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* number of entries in use */</span></span>
<a name="line479">0479: </a>  JSAMPARRAY colormap<span style="color: #990000">;</span>          <span style="font-style: italic"><span style="color: #9A1900">/* The color map as a 2-D pixel array */</span></span>
<a name="line480">0480: </a>
<a name="line481">0481: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* State variables: these variables indicate the progress of decompression.</span></span>
<a name="line482">0482: </a><span style="font-style: italic"><span style="color: #9A1900">   * The application may examine these but must not modify them.</span></span>
<a name="line483">0483: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line484">0484: </a>
<a name="line485">0485: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Row index of next scanline to be read from jpeg_read_scanlines().</span></span>
<a name="line486">0486: </a><span style="font-style: italic"><span style="color: #9A1900">   * Application may use this to control its processing loop, e.g.,</span></span>
<a name="line487">0487: </a><span style="font-style: italic"><span style="color: #9A1900">   * "while (output_scanline &lt; output_height)".</span></span>
<a name="line488">0488: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line489">0489: </a>  JDIMENSION output_scanline<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* 0 .. output_height-1  */</span></span>
<a name="line490">0490: </a>
<a name="line491">0491: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Current input scan number and number of iMCU rows completed in scan.</span></span>
<a name="line492">0492: </a><span style="font-style: italic"><span style="color: #9A1900">   * These indicate the progress of the decompressor input side.</span></span>
<a name="line493">0493: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line494">0494: </a>  <span style="color: #009900">int</span> input_scan_number<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* Number of SOS markers seen so far */</span></span>
<a name="line495">0495: </a>  JDIMENSION input_iMCU_row<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* Number of iMCU rows completed */</span></span>
<a name="line496">0496: </a>
<a name="line497">0497: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The "output scan number" is the notional scan being displayed by the</span></span>
<a name="line498">0498: </a><span style="font-style: italic"><span style="color: #9A1900">   * output side.  The decompressor will not allow output scan/row number</span></span>
<a name="line499">0499: </a><span style="font-style: italic"><span style="color: #9A1900">   * to get ahead of input scan/row, but it can fall arbitrarily far behind.</span></span>
<a name="line500">0500: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line501">0501: </a>  <span style="color: #009900">int</span> output_scan_number<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* Nominal scan number being displayed */</span></span>
<a name="line502">0502: </a>  JDIMENSION output_iMCU_row<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* Number of iMCU rows read */</span></span>
<a name="line503">0503: </a>
<a name="line504">0504: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Current progression status.  coef_bits[c][i] indicates the precision</span></span>
<a name="line505">0505: </a><span style="font-style: italic"><span style="color: #9A1900">   * with which component c's DCT coefficient i (in zigzag order) is known.</span></span>
<a name="line506">0506: </a><span style="font-style: italic"><span style="color: #9A1900">   * It is -1 when no data has yet been received, otherwise it is the point</span></span>
<a name="line507">0507: </a><span style="font-style: italic"><span style="color: #9A1900">   * transform (shift) value for the most recent scan of the coefficient</span></span>
<a name="line508">0508: </a><span style="font-style: italic"><span style="color: #9A1900">   * (thus, 0 at completion of the progression).</span></span>
<a name="line509">0509: </a><span style="font-style: italic"><span style="color: #9A1900">   * This pointer is NULL when reading a non-progressive file.</span></span>
<a name="line510">0510: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line511">0511: </a>  <span style="color: #009900">int</span> <span style="color: #990000">(</span><span style="color: #990000">*</span>coef_bits<span style="color: #990000">)</span><span style="color: #990000">[</span>DCTSIZE2<span style="color: #990000">]</span><span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* -1 or current Al value for each coef */</span></span>
<a name="line512">0512: </a>
<a name="line513">0513: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Internal JPEG parameters --- the application usually need not look at</span></span>
<a name="line514">0514: </a><span style="font-style: italic"><span style="color: #9A1900">   * these fields.  Note that the decompressor output side may not use</span></span>
<a name="line515">0515: </a><span style="font-style: italic"><span style="color: #9A1900">   * any parameters that can change between scans.</span></span>
<a name="line516">0516: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line517">0517: </a>
<a name="line518">0518: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Quantization and Huffman tables are carried forward across input</span></span>
<a name="line519">0519: </a><span style="font-style: italic"><span style="color: #9A1900">   * datastreams when processing abbreviated JPEG datastreams.</span></span>
<a name="line520">0520: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line521">0521: </a>
<a name="line522">0522: </a>  JQUANT_TBL <span style="color: #990000">*</span> quant_tbl_ptrs<span style="color: #990000">[</span>NUM_QUANT_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line523">0523: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* ptrs to coefficient quantization tables, or NULL if not defined */</span></span>
<a name="line524">0524: </a>
<a name="line525">0525: </a>  JHUFF_TBL <span style="color: #990000">*</span> dc_huff_tbl_ptrs<span style="color: #990000">[</span>NUM_HUFF_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line526">0526: </a>  JHUFF_TBL <span style="color: #990000">*</span> ac_huff_tbl_ptrs<span style="color: #990000">[</span>NUM_HUFF_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line527">0527: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* ptrs to Huffman coding tables, or NULL if not defined */</span></span>
<a name="line528">0528: </a>
<a name="line529">0529: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These parameters are never carried across datastreams, since they</span></span>
<a name="line530">0530: </a><span style="font-style: italic"><span style="color: #9A1900">   * are given in SOF/SOS markers or defined to be reset by SOI.</span></span>
<a name="line531">0531: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line532">0532: </a>
<a name="line533">0533: </a>  <span style="color: #009900">int</span> data_precision<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* bits of precision in image data */</span></span>
<a name="line534">0534: </a>
<a name="line535">0535: </a>  jpeg_component_info <span style="color: #990000">*</span> comp_info<span style="color: #990000">;</span>
<a name="line536">0536: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* comp_info[i] describes component that appears i'th in SOF */</span></span>
<a name="line537">0537: </a>
<a name="line538">0538: </a>  boolean progressive_mode<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* TRUE if SOFn specifies progressive mode */</span></span>
<a name="line539">0539: </a>  boolean arith_code<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=arithmetic coding, FALSE=Huffman */</span></span>
<a name="line540">0540: </a>
<a name="line541">0541: </a>  UINT8 arith_dc_L<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* L values for DC arith-coding tables */</span></span>
<a name="line542">0542: </a>  UINT8 arith_dc_U<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* U values for DC arith-coding tables */</span></span>
<a name="line543">0543: </a>  UINT8 arith_ac_K<span style="color: #990000">[</span>NUM_ARITH_TBLS<span style="color: #990000">]</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Kx values for AC arith-coding tables */</span></span>
<a name="line544">0544: </a>
<a name="line545">0545: </a>  <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> restart_interval<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* MCUs per restart interval, or 0 for no restart */</span></span>
<a name="line546">0546: </a>
<a name="line547">0547: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These fields record data obtained from optional markers recognized by</span></span>
<a name="line548">0548: </a><span style="font-style: italic"><span style="color: #9A1900">   * the JPEG library.</span></span>
<a name="line549">0549: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line550">0550: </a>  boolean saw_JFIF_marker<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* TRUE iff a JFIF APP0 marker was found */</span></span>
<a name="line551">0551: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Data copied from JFIF marker; only valid if saw_JFIF_marker is TRUE: */</span></span>
<a name="line552">0552: </a>  UINT8 JFIF_major_version<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* JFIF version number */</span></span>
<a name="line553">0553: </a>  UINT8 JFIF_minor_version<span style="color: #990000">;</span>
<a name="line554">0554: </a>  UINT8 density_unit<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* JFIF code for pixel size units */</span></span>
<a name="line555">0555: </a>  UINT16 X_density<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* Horizontal pixel density */</span></span>
<a name="line556">0556: </a>  UINT16 Y_density<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* Vertical pixel density */</span></span>
<a name="line557">0557: </a>  boolean saw_Adobe_marker<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* TRUE iff an Adobe APP14 marker was found */</span></span>
<a name="line558">0558: </a>  UINT8 Adobe_transform<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* Color transform code from Adobe marker */</span></span>
<a name="line559">0559: </a>
<a name="line560">0560: </a>  boolean CCIR601_sampling<span style="color: #990000">;</span>     <span style="font-style: italic"><span style="color: #9A1900">/* TRUE=first samples are cosited */</span></span>
<a name="line561">0561: </a>
<a name="line562">0562: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Aside from the specific data retained from APPn markers known to the</span></span>
<a name="line563">0563: </a><span style="font-style: italic"><span style="color: #9A1900">   * library, the uninterpreted contents of any or all APPn and COM markers</span></span>
<a name="line564">0564: </a><span style="font-style: italic"><span style="color: #9A1900">   * can be saved in a list for examination by the application.</span></span>
<a name="line565">0565: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line566">0566: </a>  jpeg_saved_marker_ptr marker_list<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Head of list of saved markers */</span></span>
<a name="line567">0567: </a>
<a name="line568">0568: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Remaining fields are known throughout decompressor, but generally</span></span>
<a name="line569">0569: </a><span style="font-style: italic"><span style="color: #9A1900">   * should not be touched by a surrounding application.</span></span>
<a name="line570">0570: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line571">0571: </a>
<a name="line572">0572: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line573">0573: </a><span style="font-style: italic"><span style="color: #9A1900">   * These fields are computed during decompression startup</span></span>
<a name="line574">0574: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line575">0575: </a>  <span style="color: #009900">int</span> max_h_samp_factor<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* largest h_samp_factor */</span></span>
<a name="line576">0576: </a>  <span style="color: #009900">int</span> max_v_samp_factor<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* largest v_samp_factor */</span></span>
<a name="line577">0577: </a>
<a name="line578">0578: </a>  <span style="color: #009900">int</span> min_DCT_scaled_size<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* smallest DCT_scaled_size of any component */</span></span>
<a name="line579">0579: </a>
<a name="line580">0580: </a>  JDIMENSION total_iMCU_rows<span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">/* # of iMCU rows in image */</span></span>
<a name="line581">0581: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The coefficient controller's input and output progress is measured in</span></span>
<a name="line582">0582: </a><span style="font-style: italic"><span style="color: #9A1900">   * units of "iMCU" (interleaved MCU) rows.  These are the same as MCU rows</span></span>
<a name="line583">0583: </a><span style="font-style: italic"><span style="color: #9A1900">   * in fully interleaved JPEG scans, but are used whether the scan is</span></span>
<a name="line584">0584: </a><span style="font-style: italic"><span style="color: #9A1900">   * interleaved or not.  We define an iMCU row as v_samp_factor DCT block</span></span>
<a name="line585">0585: </a><span style="font-style: italic"><span style="color: #9A1900">   * rows of each component.  Therefore, the IDCT output contains</span></span>
<a name="line586">0586: </a><span style="font-style: italic"><span style="color: #9A1900">   * v_samp_factor*DCT_scaled_size sample rows of a component per iMCU row.</span></span>
<a name="line587">0587: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line588">0588: </a>
<a name="line589">0589: </a>  JSAMPLE <span style="color: #990000">*</span> sample_range_limit<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* table for fast range-limiting */</span></span>
<a name="line590">0590: </a>
<a name="line591">0591: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line592">0592: </a><span style="font-style: italic"><span style="color: #9A1900">   * These fields are valid during any one scan.</span></span>
<a name="line593">0593: </a><span style="font-style: italic"><span style="color: #9A1900">   * They describe the components and MCUs actually appearing in the scan.</span></span>
<a name="line594">0594: </a><span style="font-style: italic"><span style="color: #9A1900">   * Note that the decompressor output side must not use these fields.</span></span>
<a name="line595">0595: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line596">0596: </a>  <span style="color: #009900">int</span> comps_in_scan<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* # of JPEG components in this scan */</span></span>
<a name="line597">0597: </a>  jpeg_component_info <span style="color: #990000">*</span> cur_comp_info<span style="color: #990000">[</span>MAX_COMPS_IN_SCAN<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line598">0598: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* *cur_comp_info[i] describes component that appears i'th in SOS */</span></span>
<a name="line599">0599: </a>
<a name="line600">0600: </a>  JDIMENSION MCUs_per_row<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* # of MCUs across the image */</span></span>
<a name="line601">0601: </a>  JDIMENSION MCU_rows_in_scan<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">/* # of MCU rows in the image */</span></span>
<a name="line602">0602: </a>
<a name="line603">0603: </a>  <span style="color: #009900">int</span> blocks_in_MCU<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* # of DCT blocks per MCU */</span></span>
<a name="line604">0604: </a>  <span style="color: #009900">int</span> MCU_membership<span style="color: #990000">[</span>D_MAX_BLOCKS_IN_MCU<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line605">0605: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* MCU_membership[i] is index in cur_comp_info of component owning */</span></span>
<a name="line606">0606: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* i'th block in an MCU */</span></span>
<a name="line607">0607: </a>
<a name="line608">0608: </a>  <span style="color: #009900">int</span> Ss<span style="color: #990000">,</span> Se<span style="color: #990000">,</span> Ah<span style="color: #990000">,</span> Al<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">/* progressive JPEG parameters for scan */</span></span>
<a name="line609">0609: </a>
<a name="line610">0610: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* This field is shared between entropy decoder and marker parser.</span></span>
<a name="line611">0611: </a><span style="font-style: italic"><span style="color: #9A1900">   * It is either zero or the code of a JPEG marker that has been</span></span>
<a name="line612">0612: </a><span style="font-style: italic"><span style="color: #9A1900">   * read from the data source, but has not yet been processed.</span></span>
<a name="line613">0613: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line614">0614: </a>  <span style="color: #009900">int</span> unread_marker<span style="color: #990000">;</span>
<a name="line615">0615: </a>
<a name="line616">0616: </a>  <span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line617">0617: </a><span style="font-style: italic"><span style="color: #9A1900">   * Links to decompression subobjects (methods, private variables of modules)</span></span>
<a name="line618">0618: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line619">0619: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_decomp_master <span style="color: #990000">*</span> master<span style="color: #990000">;</span>
<a name="line620">0620: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_main_controller <span style="color: #990000">*</span> main<span style="color: #990000">;</span>
<a name="line621">0621: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_coef_controller <span style="color: #990000">*</span> coef<span style="color: #990000">;</span>
<a name="line622">0622: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_post_controller <span style="color: #990000">*</span> post<span style="color: #990000">;</span>
<a name="line623">0623: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_input_controller <span style="color: #990000">*</span> inputctl<span style="color: #990000">;</span>
<a name="line624">0624: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_reader <span style="color: #990000">*</span> marker<span style="color: #990000">;</span>
<a name="line625">0625: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_entropy_decoder <span style="color: #990000">*</span> entropy<span style="color: #990000">;</span>
<a name="line626">0626: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_inverse_dct <span style="color: #990000">*</span> idct<span style="color: #990000">;</span>
<a name="line627">0627: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_upsampler <span style="color: #990000">*</span> upsample<span style="color: #990000">;</span>
<a name="line628">0628: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_deconverter <span style="color: #990000">*</span> cconvert<span style="color: #990000">;</span>
<a name="line629">0629: </a>  <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_quantizer <span style="color: #990000">*</span> cquantize<span style="color: #990000">;</span>
<a name="line630">0630: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line631">0631: </a>
<a name="line632">0632: </a>
<a name="line633">0633: </a><span style="font-style: italic"><span style="color: #9A1900">/* "Object" declarations for JPEG modules that may be supplied or called</span></span>
<a name="line634">0634: </a><span style="font-style: italic"><span style="color: #9A1900"> * directly by the surrounding application.</span></span>
<a name="line635">0635: </a><span style="font-style: italic"><span style="color: #9A1900"> * As with all objects in the JPEG library, these structs only define the</span></span>
<a name="line636">0636: </a><span style="font-style: italic"><span style="color: #9A1900"> * publicly visible methods and state variables of a module.  Additional</span></span>
<a name="line637">0637: </a><span style="font-style: italic"><span style="color: #9A1900"> * private fields may exist after the public ones.</span></span>
<a name="line638">0638: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line639">0639: </a>
<a name="line640">0640: </a>
<a name="line641">0641: </a><span style="font-style: italic"><span style="color: #9A1900">/* Error handler object */</span></span>
<a name="line642">0642: </a>
<a name="line643">0643: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_error_mgr <span style="color: #FF0000">{</span>
<a name="line644">0644: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Error exit handler: does not return to caller */</span></span>
<a name="line645">0645: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> error_exit<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line646">0646: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Conditionally emit a trace or warning message */</span></span>
<a name="line647">0647: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> emit_message<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> msg_level<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line648">0648: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Routine that actually outputs a trace or error message */</span></span>
<a name="line649">0649: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> output_message<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line650">0650: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Format a message string for the most recent JPEG error or message */</span></span>
<a name="line651">0651: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> format_message<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">char</span> <span style="color: #990000">*</span> buffer<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line652">0652: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JMSG_LENGTH_MAX  <span style="color: #993399">200</span>    <span style="font-style: italic"><span style="color: #9A1900">/* recommended size of format_message buffer */</span></span>
<a name="line653">0653: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Reset error state variables at start of a new image */</span></span>
<a name="line654">0654: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> reset_error_mgr<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line655">0655: </a>  
<a name="line656">0656: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* The message ID code and any parameters are saved here.</span></span>
<a name="line657">0657: </a><span style="font-style: italic"><span style="color: #9A1900">   * A message can have one string parameter or up to 8 int parameters.</span></span>
<a name="line658">0658: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line659">0659: </a>  <span style="color: #009900">int</span> msg_code<span style="color: #990000">;</span>
<a name="line660">0660: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JMSG_STR_PARM_MAX  <span style="color: #993399">80</span>
<a name="line661">0661: </a>  <span style="font-weight: bold"><span style="color: #0000FF">union</span></span> <span style="color: #FF0000">{</span>
<a name="line662">0662: </a>    <span style="color: #009900">int</span> i<span style="color: #990000">[</span><span style="color: #993399">8</span><span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line663">0663: </a>    <span style="color: #009900">char</span> s<span style="color: #990000">[</span>JMSG_STR_PARM_MAX<span style="color: #990000">]</span><span style="color: #990000">;</span>
<a name="line664">0664: </a>  <span style="color: #FF0000">}</span> msg_parm<span style="color: #990000">;</span>
<a name="line665">0665: </a>  
<a name="line666">0666: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Standard state variables for error facility */</span></span>
<a name="line667">0667: </a>  
<a name="line668">0668: </a>  <span style="color: #009900">int</span> trace_level<span style="color: #990000">;</span>              <span style="font-style: italic"><span style="color: #9A1900">/* max msg_level that will be displayed */</span></span>
<a name="line669">0669: </a>  
<a name="line670">0670: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* For recoverable corrupt-data errors, we emit a warning message,</span></span>
<a name="line671">0671: </a><span style="font-style: italic"><span style="color: #9A1900">   * but keep going unless emit_message chooses to abort.  emit_message</span></span>
<a name="line672">0672: </a><span style="font-style: italic"><span style="color: #9A1900">   * should count warnings in num_warnings.  The surrounding application</span></span>
<a name="line673">0673: </a><span style="font-style: italic"><span style="color: #9A1900">   * can check for bad data by seeing if num_warnings is nonzero at the</span></span>
<a name="line674">0674: </a><span style="font-style: italic"><span style="color: #9A1900">   * end of processing.</span></span>
<a name="line675">0675: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line676">0676: </a>  <span style="color: #009900">long</span> num_warnings<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* number of corrupt-data warnings */</span></span>
<a name="line677">0677: </a>
<a name="line678">0678: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* These fields point to the table(s) of error message strings.</span></span>
<a name="line679">0679: </a><span style="font-style: italic"><span style="color: #9A1900">   * An application can change the table pointer to switch to a different</span></span>
<a name="line680">0680: </a><span style="font-style: italic"><span style="color: #9A1900">   * message list (typically, to change the language in which errors are</span></span>
<a name="line681">0681: </a><span style="font-style: italic"><span style="color: #9A1900">   * reported).  Some applications may wish to add additional error codes</span></span>
<a name="line682">0682: </a><span style="font-style: italic"><span style="color: #9A1900">   * that will be handled by the JPEG library error mechanism; the second</span></span>
<a name="line683">0683: </a><span style="font-style: italic"><span style="color: #9A1900">   * table pointer is used for this purpose.</span></span>
<a name="line684">0684: </a><span style="font-style: italic"><span style="color: #9A1900">   *</span></span>
<a name="line685">0685: </a><span style="font-style: italic"><span style="color: #9A1900">   * First table includes all errors generated by JPEG library itself.</span></span>
<a name="line686">0686: </a><span style="font-style: italic"><span style="color: #9A1900">   * Error code 0 is reserved for a "no such error string" message.</span></span>
<a name="line687">0687: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line688">0688: </a>  <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #009900">char</span> <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #990000">*</span> jpeg_message_table<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Library errors */</span></span>
<a name="line689">0689: </a>  <span style="color: #009900">int</span> last_jpeg_message<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* Table contains strings 0..last_jpeg_message */</span></span>
<a name="line690">0690: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Second table can be added by application (see cjpeg/djpeg for example).</span></span>
<a name="line691">0691: </a><span style="font-style: italic"><span style="color: #9A1900">   * It contains strings numbered first_addon_message..last_addon_message.</span></span>
<a name="line692">0692: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line693">0693: </a>  <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #009900">char</span> <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #990000">*</span> addon_message_table<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* Non-library errors */</span></span>
<a name="line694">0694: </a>  <span style="color: #009900">int</span> first_addon_message<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">/* code for first string in addon table */</span></span>
<a name="line695">0695: </a>  <span style="color: #009900">int</span> last_addon_message<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* code for last string in addon table */</span></span>
<a name="line696">0696: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line697">0697: </a>
<a name="line698">0698: </a>
<a name="line699">0699: </a><span style="font-style: italic"><span style="color: #9A1900">/* Progress monitor object */</span></span>
<a name="line700">0700: </a>
<a name="line701">0701: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_progress_mgr <span style="color: #FF0000">{</span>
<a name="line702">0702: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> progress_monitor<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line703">0703: </a>
<a name="line704">0704: </a>  <span style="color: #009900">long</span> pass_counter<span style="color: #990000">;</span>            <span style="font-style: italic"><span style="color: #9A1900">/* work units completed in this pass */</span></span>
<a name="line705">0705: </a>  <span style="color: #009900">long</span> pass_limit<span style="color: #990000">;</span>              <span style="font-style: italic"><span style="color: #9A1900">/* total number of work units in this pass */</span></span>
<a name="line706">0706: </a>  <span style="color: #009900">int</span> completed_passes<span style="color: #990000">;</span>         <span style="font-style: italic"><span style="color: #9A1900">/* passes completed so far */</span></span>
<a name="line707">0707: </a>  <span style="color: #009900">int</span> total_passes<span style="color: #990000">;</span>             <span style="font-style: italic"><span style="color: #9A1900">/* total number of passes expected */</span></span>
<a name="line708">0708: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line709">0709: </a>
<a name="line710">0710: </a>
<a name="line711">0711: </a><span style="font-style: italic"><span style="color: #9A1900">/* Data destination object for compression */</span></span>
<a name="line712">0712: </a>
<a name="line713">0713: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_destination_mgr <span style="color: #FF0000">{</span>
<a name="line714">0714: </a>  JOCTET <span style="color: #990000">*</span> next_output_byte<span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">/* =&gt; next byte to write in buffer */</span></span>
<a name="line715">0715: </a>  size_t free_in_buffer<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">/* # of byte spaces remaining in buffer */</span></span>
<a name="line716">0716: </a>
<a name="line717">0717: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> init_destination<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line718">0718: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">,</span> empty_output_buffer<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line719">0719: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> term_destination<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line720">0720: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line721">0721: </a>
<a name="line722">0722: </a>
<a name="line723">0723: </a><span style="font-style: italic"><span style="color: #9A1900">/* Data source object for decompression */</span></span>
<a name="line724">0724: </a>
<a name="line725">0725: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_source_mgr <span style="color: #FF0000">{</span>
<a name="line726">0726: </a>  <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> JOCTET <span style="color: #990000">*</span> next_input_byte<span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">/* =&gt; next byte to read from buffer */</span></span>
<a name="line727">0727: </a>  size_t bytes_in_buffer<span style="color: #990000">;</span>       <span style="font-style: italic"><span style="color: #9A1900">/* # of bytes remaining in buffer */</span></span>
<a name="line728">0728: </a>
<a name="line729">0729: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> init_source<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line730">0730: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">,</span> fill_input_buffer<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line731">0731: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> skip_input_data<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">long</span> num_bytes<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line732">0732: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">,</span> resync_to_restart<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> desired<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line733">0733: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> term_source<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line734">0734: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line735">0735: </a>
<a name="line736">0736: </a>
<a name="line737">0737: </a><span style="font-style: italic"><span style="color: #9A1900">/* Memory manager object.</span></span>
<a name="line738">0738: </a><span style="font-style: italic"><span style="color: #9A1900"> * Allocates "small" objects (a few K total), "large" objects (tens of K),</span></span>
<a name="line739">0739: </a><span style="font-style: italic"><span style="color: #9A1900"> * and "really big" objects (virtual arrays with backing store if needed).</span></span>
<a name="line740">0740: </a><span style="font-style: italic"><span style="color: #9A1900"> * The memory manager does not allow individual objects to be freed; rather,</span></span>
<a name="line741">0741: </a><span style="font-style: italic"><span style="color: #9A1900"> * each created object is assigned to a pool, and whole pools can be freed</span></span>
<a name="line742">0742: </a><span style="font-style: italic"><span style="color: #9A1900"> * at once.  This is faster and more convenient than remembering exactly what</span></span>
<a name="line743">0743: </a><span style="font-style: italic"><span style="color: #9A1900"> * to free, especially where malloc()/free() are not too speedy.</span></span>
<a name="line744">0744: </a><span style="font-style: italic"><span style="color: #9A1900"> * NB: alloc routines never return NULL.  They exit to error_exit if not</span></span>
<a name="line745">0745: </a><span style="font-style: italic"><span style="color: #9A1900"> * successful.</span></span>
<a name="line746">0746: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line747">0747: </a>
<a name="line748">0748: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPOOL_PERMANENT <span style="color: #993399">0</span>       <span style="font-style: italic"><span style="color: #9A1900">/* lasts until master record is destroyed */</span></span>
<a name="line749">0749: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPOOL_IMAGE     <span style="color: #993399">1</span>       <span style="font-style: italic"><span style="color: #9A1900">/* lasts until done with image/datastream */</span></span>
<a name="line750">0750: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPOOL_NUMPOOLS  <span style="color: #993399">2</span>
<a name="line751">0751: </a>
<a name="line752">0752: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jvirt_sarray_control <span style="color: #990000">*</span> jvirt_sarray_ptr<span style="color: #990000">;</span>
<a name="line753">0753: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jvirt_barray_control <span style="color: #990000">*</span> jvirt_barray_ptr<span style="color: #990000">;</span>
<a name="line754">0754: </a>
<a name="line755">0755: </a>
<a name="line756">0756: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_memory_mgr <span style="color: #FF0000">{</span>
<a name="line757">0757: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Method pointers */</span></span>
<a name="line758">0758: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span> <span style="color: #990000">*</span><span style="color: #990000">,</span> alloc_small<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line759">0759: </a>                                size_t sizeofobject<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line760">0760: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span> FAR <span style="color: #990000">*</span><span style="color: #990000">,</span> alloc_large<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line761">0761: </a>                                     size_t sizeofobject<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line762">0762: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>JSAMPARRAY<span style="color: #990000">,</span> alloc_sarray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line763">0763: </a>                                     JDIMENSION samplesperrow<span style="color: #990000">,</span>
<a name="line764">0764: </a>                                     JDIMENSION numrows<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line765">0765: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>JBLOCKARRAY<span style="color: #990000">,</span> alloc_barray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line766">0766: </a>                                      JDIMENSION blocksperrow<span style="color: #990000">,</span>
<a name="line767">0767: </a>                                      JDIMENSION numrows<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line768">0768: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>jvirt_sarray_ptr<span style="color: #990000">,</span> request_virt_sarray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span>
<a name="line769">0769: </a>                                                  <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line770">0770: </a>                                                  boolean pre_zero<span style="color: #990000">,</span>
<a name="line771">0771: </a>                                                  JDIMENSION samplesperrow<span style="color: #990000">,</span>
<a name="line772">0772: </a>                                                  JDIMENSION numrows<span style="color: #990000">,</span>
<a name="line773">0773: </a>                                                  JDIMENSION maxaccess<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line774">0774: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>jvirt_barray_ptr<span style="color: #990000">,</span> request_virt_barray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span>
<a name="line775">0775: </a>                                                  <span style="color: #009900">int</span> pool_id<span style="color: #990000">,</span>
<a name="line776">0776: </a>                                                  boolean pre_zero<span style="color: #990000">,</span>
<a name="line777">0777: </a>                                                  JDIMENSION blocksperrow<span style="color: #990000">,</span>
<a name="line778">0778: </a>                                                  JDIMENSION numrows<span style="color: #990000">,</span>
<a name="line779">0779: </a>                                                  JDIMENSION maxaccess<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line780">0780: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> realize_virt_arrays<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line781">0781: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>JSAMPARRAY<span style="color: #990000">,</span> access_virt_sarray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span>
<a name="line782">0782: </a>                                           jvirt_sarray_ptr ptr<span style="color: #990000">,</span>
<a name="line783">0783: </a>                                           JDIMENSION start_row<span style="color: #990000">,</span>
<a name="line784">0784: </a>                                           JDIMENSION num_rows<span style="color: #990000">,</span>
<a name="line785">0785: </a>                                           boolean writable<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line786">0786: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>JBLOCKARRAY<span style="color: #990000">,</span> access_virt_barray<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span>
<a name="line787">0787: </a>                                            jvirt_barray_ptr ptr<span style="color: #990000">,</span>
<a name="line788">0788: </a>                                            JDIMENSION start_row<span style="color: #990000">,</span>
<a name="line789">0789: </a>                                            JDIMENSION num_rows<span style="color: #990000">,</span>
<a name="line790">0790: </a>                                            boolean writable<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line791">0791: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> free_pool<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> pool_id<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line792">0792: </a>  <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">,</span> self_destruct<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line793">0793: </a>
<a name="line794">0794: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Limit on memory allocation for this JPEG object.  (Note that this is</span></span>
<a name="line795">0795: </a><span style="font-style: italic"><span style="color: #9A1900">   * merely advisory, not a guaranteed maximum; it only affects the space</span></span>
<a name="line796">0796: </a><span style="font-style: italic"><span style="color: #9A1900">   * used for virtual-array buffers.)  May be changed by outer application</span></span>
<a name="line797">0797: </a><span style="font-style: italic"><span style="color: #9A1900">   * after creating the JPEG object.</span></span>
<a name="line798">0798: </a><span style="font-style: italic"><span style="color: #9A1900">   */</span></span>
<a name="line799">0799: </a>  <span style="color: #009900">long</span> max_memory_to_use<span style="color: #990000">;</span>
<a name="line800">0800: </a>
<a name="line801">0801: </a>  <span style="font-style: italic"><span style="color: #9A1900">/* Maximum allocation request accepted by alloc_large. */</span></span>
<a name="line802">0802: </a>  <span style="color: #009900">long</span> max_alloc_chunk<span style="color: #990000">;</span>
<a name="line803">0803: </a><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line804">0804: </a>
<a name="line805">0805: </a>
<a name="line806">0806: </a><span style="font-style: italic"><span style="color: #9A1900">/* Routine signature for application-supplied marker processing methods.</span></span>
<a name="line807">0807: </a><span style="font-style: italic"><span style="color: #9A1900"> * Need not pass marker code since it is stored in cinfo-&gt;unread_marker.</span></span>
<a name="line808">0808: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line809">0809: </a><span style="font-weight: bold"><span style="color: #0000FF">typedef</span></span> <span style="font-weight: bold"><span style="color: #000000">JMETHOD</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">,</span> jpeg_marker_parser_method<span style="color: #990000">,</span> <span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line810">0810: </a>
<a name="line811">0811: </a>
<a name="line812">0812: </a><span style="font-style: italic"><span style="color: #9A1900">/* Declarations for routines called by application.</span></span>
<a name="line813">0813: </a><span style="font-style: italic"><span style="color: #9A1900"> * The JPP macro hides prototype parameters from compilers that can't cope.</span></span>
<a name="line814">0814: </a><span style="font-style: italic"><span style="color: #9A1900"> * Note JPP requires double parentheses.</span></span>
<a name="line815">0815: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line816">0816: </a>
<a name="line817">0817: </a><span style="font-weight: bold"><span style="color: #000080">#ifdef</span></span> HAVE_PROTOTYPES
<a name="line818">0818: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span>arglist<span style="color: #990000">)</span>    arglist
<a name="line819">0819: </a><span style="font-weight: bold"><span style="color: #000080">#else</span></span>
<a name="line820">0820: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span>arglist<span style="color: #990000">)</span>    <span style="color: #990000">(</span><span style="color: #990000">)</span>
<a name="line821">0821: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line822">0822: </a>
<a name="line823">0823: </a>
<a name="line824">0824: </a><span style="font-style: italic"><span style="color: #9A1900">/* Short forms of external names for systems with brain-damaged linkers.</span></span>
<a name="line825">0825: </a><span style="font-style: italic"><span style="color: #9A1900"> * We shorten external names to be unique in the first six letters, which</span></span>
<a name="line826">0826: </a><span style="font-style: italic"><span style="color: #9A1900"> * is good enough for all known systems.</span></span>
<a name="line827">0827: </a><span style="font-style: italic"><span style="color: #9A1900"> * (If your compiler itself needs names to be unique in less than 15 </span></span>
<a name="line828">0828: </a><span style="font-style: italic"><span style="color: #9A1900"> * characters, you are out of luck.  Get a better compiler.)</span></span>
<a name="line829">0829: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line830">0830: </a>
<a name="line831">0831: </a><span style="font-weight: bold"><span style="color: #000080">#ifdef</span></span> NEED_SHORT_EXTERNAL_NAMES
<a name="line832">0832: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_std_error          jStdError
<a name="line833">0833: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_CreateCompress     jCreaCompress
<a name="line834">0834: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_CreateDecompress   jCreaDecompress
<a name="line835">0835: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_destroy_compress   jDestCompress
<a name="line836">0836: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_destroy_decompress jDestDecompress
<a name="line837">0837: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_stdio_dest         jStdDest
<a name="line838">0838: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_stdio_src          jStdSrc
<a name="line839">0839: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_set_defaults       jSetDefaults
<a name="line840">0840: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_set_colorspace     jSetColorspace
<a name="line841">0841: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_default_colorspace jDefColorspace
<a name="line842">0842: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_set_quality        jSetQuality
<a name="line843">0843: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_set_linear_quality jSetLQuality
<a name="line844">0844: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_add_quant_table    jAddQuantTable
<a name="line845">0845: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_quality_scaling    jQualityScaling
<a name="line846">0846: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_simple_progression jSimProgress
<a name="line847">0847: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_suppress_tables    jSuppressTables
<a name="line848">0848: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_alloc_quant_table  jAlcQTable
<a name="line849">0849: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_alloc_huff_table   jAlcHTable
<a name="line850">0850: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_start_compress     jStrtCompress
<a name="line851">0851: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_scanlines    jWrtScanlines
<a name="line852">0852: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_finish_compress    jFinCompress
<a name="line853">0853: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_raw_data     jWrtRawData
<a name="line854">0854: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_marker       jWrtMarker
<a name="line855">0855: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_m_header     jWrtMHeader
<a name="line856">0856: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_m_byte       jWrtMByte
<a name="line857">0857: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_tables       jWrtTables
<a name="line858">0858: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_read_header        jReadHeader
<a name="line859">0859: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_start_decompress   jStrtDecompress
<a name="line860">0860: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_read_scanlines     jReadScanlines
<a name="line861">0861: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_finish_decompress  jFinDecompress
<a name="line862">0862: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_read_raw_data      jReadRawData
<a name="line863">0863: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_has_multiple_scans jHasMultScn
<a name="line864">0864: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_start_output       jStrtOutput
<a name="line865">0865: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_finish_output      jFinOutput
<a name="line866">0866: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_input_complete     jInComplete
<a name="line867">0867: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_new_colormap       jNewCMap
<a name="line868">0868: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_consume_input      jConsumeInput
<a name="line869">0869: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_calc_output_dimensions     jCalcDimensions
<a name="line870">0870: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_save_markers       jSaveMarkers
<a name="line871">0871: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_set_marker_processor       jSetMarker
<a name="line872">0872: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_read_coefficients  jReadCoefs
<a name="line873">0873: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_write_coefficients jWrtCoefs
<a name="line874">0874: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_copy_critical_parameters   jCopyCrit
<a name="line875">0875: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_abort_compress     jAbrtCompress
<a name="line876">0876: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_abort_decompress   jAbrtDecompress
<a name="line877">0877: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_abort              jAbort
<a name="line878">0878: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_destroy            jDestroy
<a name="line879">0879: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> jpeg_resync_to_restart  jResyncRestart
<a name="line880">0880: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">/* NEED_SHORT_EXTERNAL_NAMES */</span></span>
<a name="line881">0881: </a>
<a name="line882">0882: </a>
<a name="line883">0883: </a><span style="font-style: italic"><span style="color: #9A1900">/* Default error-management setup */</span></span>
<a name="line884">0884: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_error_mgr <span style="color: #990000">*</span><span style="color: #990000">)</span> jpeg_std_error
<a name="line885">0885: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_error_mgr <span style="color: #990000">*</span> err<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line886">0886: </a>
<a name="line887">0887: </a><span style="font-style: italic"><span style="color: #9A1900">/* Initialization of JPEG compression objects.</span></span>
<a name="line888">0888: </a><span style="font-style: italic"><span style="color: #9A1900"> * jpeg_create_compress() and jpeg_create_decompress() are the exported</span></span>
<a name="line889">0889: </a><span style="font-style: italic"><span style="color: #9A1900"> * names that applications should call.  These expand to calls on</span></span>
<a name="line890">0890: </a><span style="font-style: italic"><span style="color: #9A1900"> * jpeg_CreateCompress and jpeg_CreateDecompress with additional information</span></span>
<a name="line891">0891: </a><span style="font-style: italic"><span style="color: #9A1900"> * passed for version mismatch checking.</span></span>
<a name="line892">0892: </a><span style="font-style: italic"><span style="color: #9A1900"> * NB: you must set up the error-manager BEFORE calling jpeg_create_xxx.</span></span>
<a name="line893">0893: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line894">0894: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> <span style="font-weight: bold"><span style="color: #000000">jpeg_create_compress</span></span><span style="color: #990000">(</span>cinfo<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<a name="line895">0895: </a>    <span style="font-weight: bold"><span style="color: #000000">jpeg_CreateCompress</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>cinfo<span style="color: #990000">)</span><span style="color: #990000">,</span> JPEG_LIB_VERSION<span style="color: #990000">,</span> <span style="color: #990000">\</span>
<a name="line896">0896: </a>                        <span style="color: #990000">(</span>size_t<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_compress_struct<span style="color: #990000">)</span><span style="color: #990000">)</span>
<a name="line897">0897: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> <span style="font-weight: bold"><span style="color: #000000">jpeg_create_decompress</span></span><span style="color: #990000">(</span>cinfo<span style="color: #990000">)</span> <span style="color: #990000">\</span>
<a name="line898">0898: </a>    <span style="font-weight: bold"><span style="color: #000000">jpeg_CreateDecompress</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>cinfo<span style="color: #990000">)</span><span style="color: #990000">,</span> JPEG_LIB_VERSION<span style="color: #990000">,</span> <span style="color: #990000">\</span>
<a name="line899">0899: </a>                          <span style="color: #990000">(</span>size_t<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #0000FF">sizeof</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_decompress_struct<span style="color: #990000">)</span><span style="color: #990000">)</span>
<a name="line900">0900: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_CreateCompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line901">0901: </a>                                      <span style="color: #009900">int</span> version<span style="color: #990000">,</span> size_t structsize<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line902">0902: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_CreateDecompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line903">0903: </a>                                        <span style="color: #009900">int</span> version<span style="color: #990000">,</span> size_t structsize<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line904">0904: </a><span style="font-style: italic"><span style="color: #9A1900">/* Destruction of JPEG compression objects */</span></span>
<a name="line905">0905: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_destroy_compress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line906">0906: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_destroy_decompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line907">0907: </a>
<a name="line908">0908: </a><span style="font-style: italic"><span style="color: #9A1900">/* Standard data source and destination managers: stdio streams. */</span></span>
<a name="line909">0909: </a><span style="font-style: italic"><span style="color: #9A1900">/* Caller is responsible for opening the file before and closing after. */</span></span>
<a name="line910">0910: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_stdio_dest <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> FILE <span style="color: #990000">*</span> outfile<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line911">0911: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_stdio_src <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span> FILE <span style="color: #990000">*</span> infile<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line912">0912: </a>
<a name="line913">0913: </a><span style="font-style: italic"><span style="color: #9A1900">/* Default parameter setup for compression */</span></span>
<a name="line914">0914: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_set_defaults <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line915">0915: </a><span style="font-style: italic"><span style="color: #9A1900">/* Compression parameter setup aids */</span></span>
<a name="line916">0916: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_set_colorspace <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line917">0917: </a>                                      J_COLOR_SPACE colorspace<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line918">0918: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_default_colorspace <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line919">0919: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_set_quality <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> quality<span style="color: #990000">,</span>
<a name="line920">0920: </a>                                   boolean force_baseline<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line921">0921: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_set_linear_quality <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line922">0922: </a>                                          <span style="color: #009900">int</span> scale_factor<span style="color: #990000">,</span>
<a name="line923">0923: </a>                                          boolean force_baseline<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line924">0924: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_add_quant_table <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> which_tbl<span style="color: #990000">,</span>
<a name="line925">0925: </a>                                       <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> <span style="color: #990000">*</span>basic_table<span style="color: #990000">,</span>
<a name="line926">0926: </a>                                       <span style="color: #009900">int</span> scale_factor<span style="color: #990000">,</span>
<a name="line927">0927: </a>                                       boolean force_baseline<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line928">0928: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> jpeg_quality_scaling <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span><span style="color: #009900">int</span> quality<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line929">0929: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_simple_progression <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line930">0930: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_suppress_tables <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line931">0931: </a>                                       boolean suppress<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line932">0932: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JQUANT_TBL <span style="color: #990000">*</span><span style="color: #990000">)</span> jpeg_alloc_quant_table <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line933">0933: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JHUFF_TBL <span style="color: #990000">*</span><span style="color: #990000">)</span> jpeg_alloc_huff_table <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line934">0934: </a>
<a name="line935">0935: </a><span style="font-style: italic"><span style="color: #9A1900">/* Main entry points for compression */</span></span>
<a name="line936">0936: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_start_compress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line937">0937: </a>                                      boolean write_all_tables<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line938">0938: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JDIMENSION<span style="color: #990000">)</span> jpeg_write_scanlines <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line939">0939: </a>                                             JSAMPARRAY scanlines<span style="color: #990000">,</span>
<a name="line940">0940: </a>                                             JDIMENSION num_lines<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line941">0941: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_finish_compress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line942">0942: </a>
<a name="line943">0943: </a><span style="font-style: italic"><span style="color: #9A1900">/* Replaces jpeg_write_scanlines when writing raw downsampled data. */</span></span>
<a name="line944">0944: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JDIMENSION<span style="color: #990000">)</span> jpeg_write_raw_data <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line945">0945: </a>                                            JSAMPIMAGE data<span style="color: #990000">,</span>
<a name="line946">0946: </a>                                            JDIMENSION num_lines<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line947">0947: </a>
<a name="line948">0948: </a><span style="font-style: italic"><span style="color: #9A1900">/* Write a special marker.  See libjpeg.doc concerning safe usage. */</span></span>
<a name="line949">0949: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_write_marker
<a name="line950">0950: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> marker<span style="color: #990000">,</span>
<a name="line951">0951: </a>             <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> JOCTET <span style="color: #990000">*</span> dataptr<span style="color: #990000">,</span> <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> datalen<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line952">0952: </a><span style="font-style: italic"><span style="color: #9A1900">/* Same, but piecemeal. */</span></span>
<a name="line953">0953: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_write_m_header
<a name="line954">0954: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> marker<span style="color: #990000">,</span> <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> datalen<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line955">0955: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_write_m_byte
<a name="line956">0956: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> val<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line957">0957: </a>
<a name="line958">0958: </a><span style="font-style: italic"><span style="color: #9A1900">/* Alternate compression function: just write an abbreviated table file */</span></span>
<a name="line959">0959: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_write_tables <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line960">0960: </a>
<a name="line961">0961: </a><span style="font-style: italic"><span style="color: #9A1900">/* Decompression startup: read start of JPEG datastream to see what's there */</span></span>
<a name="line962">0962: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> jpeg_read_header <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line963">0963: </a>                                  boolean require_image<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line964">0964: </a><span style="font-style: italic"><span style="color: #9A1900">/* Return value is one of: */</span></span>
<a name="line965">0965: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_SUSPENDED          <span style="color: #993399">0</span> <span style="font-style: italic"><span style="color: #9A1900">/* Suspended due to lack of input data */</span></span>
<a name="line966">0966: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_HEADER_OK          <span style="color: #993399">1</span> <span style="font-style: italic"><span style="color: #9A1900">/* Found valid image datastream */</span></span>
<a name="line967">0967: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_HEADER_TABLES_ONLY <span style="color: #993399">2</span> <span style="font-style: italic"><span style="color: #9A1900">/* Found valid table-specs-only datastream */</span></span>
<a name="line968">0968: </a><span style="font-style: italic"><span style="color: #9A1900">/* If you pass require_image = TRUE (normal case), you need not check for</span></span>
<a name="line969">0969: </a><span style="font-style: italic"><span style="color: #9A1900"> * a TABLES_ONLY return code; an abbreviated file will cause an error exit.</span></span>
<a name="line970">0970: </a><span style="font-style: italic"><span style="color: #9A1900"> * JPEG_SUSPENDED is only possible if you use a data source module that can</span></span>
<a name="line971">0971: </a><span style="font-style: italic"><span style="color: #9A1900"> * give a suspension return (the stdio source module doesn't).</span></span>
<a name="line972">0972: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line973">0973: </a>
<a name="line974">0974: </a><span style="font-style: italic"><span style="color: #9A1900">/* Main entry points for decompression */</span></span>
<a name="line975">0975: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_start_decompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line976">0976: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JDIMENSION<span style="color: #990000">)</span> jpeg_read_scanlines <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line977">0977: </a>                                            JSAMPARRAY scanlines<span style="color: #990000">,</span>
<a name="line978">0978: </a>                                            JDIMENSION max_lines<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line979">0979: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_finish_decompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line980">0980: </a>
<a name="line981">0981: </a><span style="font-style: italic"><span style="color: #9A1900">/* Replaces jpeg_read_scanlines when reading raw downsampled data. */</span></span>
<a name="line982">0982: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>JDIMENSION<span style="color: #990000">)</span> jpeg_read_raw_data <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line983">0983: </a>                                           JSAMPIMAGE data<span style="color: #990000">,</span>
<a name="line984">0984: </a>                                           JDIMENSION max_lines<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line985">0985: </a>
<a name="line986">0986: </a><span style="font-style: italic"><span style="color: #9A1900">/* Additional entry points for buffered-image mode. */</span></span>
<a name="line987">0987: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_has_multiple_scans <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line988">0988: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_start_output <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line989">0989: </a>                                       <span style="color: #009900">int</span> scan_number<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line990">0990: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_finish_output <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line991">0991: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_input_complete <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line992">0992: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_new_colormap <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line993">0993: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">int</span><span style="color: #990000">)</span> jpeg_consume_input <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line994">0994: </a><span style="font-style: italic"><span style="color: #9A1900">/* Return value is one of: */</span></span>
<a name="line995">0995: </a><span style="font-style: italic"><span style="color: #9A1900">/* #define JPEG_SUSPENDED	0    Suspended due to lack of input data */</span></span>
<a name="line996">0996: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_REACHED_SOS        <span style="color: #993399">1</span> <span style="font-style: italic"><span style="color: #9A1900">/* Reached start of new scan */</span></span>
<a name="line997">0997: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_REACHED_EOI        <span style="color: #993399">2</span> <span style="font-style: italic"><span style="color: #9A1900">/* Reached end of image */</span></span>
<a name="line998">0998: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_ROW_COMPLETED      <span style="color: #993399">3</span> <span style="font-style: italic"><span style="color: #9A1900">/* Completed one iMCU row */</span></span>
<a name="line999">0999: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_SCAN_COMPLETED     <span style="color: #993399">4</span> <span style="font-style: italic"><span style="color: #9A1900">/* Completed last iMCU row of a scan */</span></span>
<a name="line1000">1000: </a>
<a name="line1001">1001: </a><span style="font-style: italic"><span style="color: #9A1900">/* Precalculate output dimensions for current decompression parameters. */</span></span>
<a name="line1002">1002: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_calc_output_dimensions <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1003">1003: </a>
<a name="line1004">1004: </a><span style="font-style: italic"><span style="color: #9A1900">/* Control saving of COM and APPn markers into marker_list. */</span></span>
<a name="line1005">1005: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_save_markers
<a name="line1006">1006: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> marker_code<span style="color: #990000">,</span>
<a name="line1007">1007: </a>             <span style="color: #009900">unsigned</span> <span style="color: #009900">int</span> length_limit<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1008">1008: </a>
<a name="line1009">1009: </a><span style="font-style: italic"><span style="color: #9A1900">/* Install a special processing method for COM or APPn markers. */</span></span>
<a name="line1010">1010: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_set_marker_processor
<a name="line1011">1011: </a>        <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span> <span style="color: #009900">int</span> marker_code<span style="color: #990000">,</span>
<a name="line1012">1012: </a>             jpeg_marker_parser_method routine<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1013">1013: </a>
<a name="line1014">1014: </a><span style="font-style: italic"><span style="color: #9A1900">/* Read or write raw DCT coefficients --- useful for lossless transcoding. */</span></span>
<a name="line1015">1015: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>jvirt_barray_ptr <span style="color: #990000">*</span><span style="color: #990000">)</span> jpeg_read_coefficients <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1016">1016: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_write_coefficients <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">,</span>
<a name="line1017">1017: </a>                                          jvirt_barray_ptr <span style="color: #990000">*</span> coef_arrays<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1018">1018: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_copy_critical_parameters <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr srcinfo<span style="color: #990000">,</span>
<a name="line1019">1019: </a>                                                j_compress_ptr dstinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1020">1020: </a>
<a name="line1021">1021: </a><span style="font-style: italic"><span style="color: #9A1900">/* If you choose to abort compression or decompression before completing</span></span>
<a name="line1022">1022: </a><span style="font-style: italic"><span style="color: #9A1900"> * jpeg_finish_(de)compress, then you need to clean up to release memory,</span></span>
<a name="line1023">1023: </a><span style="font-style: italic"><span style="color: #9A1900"> * temporary files, etc.  You can just call jpeg_destroy_(de)compress</span></span>
<a name="line1024">1024: </a><span style="font-style: italic"><span style="color: #9A1900"> * if you're done with the JPEG object, but if you want to clean it up and</span></span>
<a name="line1025">1025: </a><span style="font-style: italic"><span style="color: #9A1900"> * reuse it, call this:</span></span>
<a name="line1026">1026: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line1027">1027: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_abort_compress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_compress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1028">1028: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_abort_decompress <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1029">1029: </a>
<a name="line1030">1030: </a><span style="font-style: italic"><span style="color: #9A1900">/* Generic versions of jpeg_abort and jpeg_destroy that work on either</span></span>
<a name="line1031">1031: </a><span style="font-style: italic"><span style="color: #9A1900"> * flavor of JPEG object.  These may be more convenient in some places.</span></span>
<a name="line1032">1032: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line1033">1033: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_abort <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1034">1034: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span><span style="color: #009900">void</span><span style="color: #990000">)</span> jpeg_destroy <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_common_ptr cinfo<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1035">1035: </a>
<a name="line1036">1036: </a><span style="font-style: italic"><span style="color: #9A1900">/* Default restart-marker-resync procedure for use by data source modules */</span></span>
<a name="line1037">1037: </a><span style="font-weight: bold"><span style="color: #000000">EXTERN</span></span><span style="color: #990000">(</span>boolean<span style="color: #990000">)</span> jpeg_resync_to_restart <span style="font-weight: bold"><span style="color: #000000">JPP</span></span><span style="color: #990000">(</span><span style="color: #990000">(</span>j_decompress_ptr cinfo<span style="color: #990000">,</span>
<a name="line1038">1038: </a>                                            <span style="color: #009900">int</span> desired<span style="color: #990000">)</span><span style="color: #990000">)</span><span style="color: #990000">;</span>
<a name="line1039">1039: </a>
<a name="line1040">1040: </a>
<a name="line1041">1041: </a><span style="font-style: italic"><span style="color: #9A1900">/* These marker codes are exported since applications and data source modules</span></span>
<a name="line1042">1042: </a><span style="font-style: italic"><span style="color: #9A1900"> * are likely to want to use them.</span></span>
<a name="line1043">1043: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line1044">1044: </a>
<a name="line1045">1045: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_RST0       <span style="color: #993399">0xD0</span>    <span style="font-style: italic"><span style="color: #9A1900">/* RST0 marker code */</span></span>
<a name="line1046">1046: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_EOI        <span style="color: #993399">0xD9</span>    <span style="font-style: italic"><span style="color: #9A1900">/* EOI marker code */</span></span>
<a name="line1047">1047: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_APP0       <span style="color: #993399">0xE0</span>    <span style="font-style: italic"><span style="color: #9A1900">/* APP0 marker code */</span></span>
<a name="line1048">1048: </a><span style="font-weight: bold"><span style="color: #000080">#define</span></span> JPEG_COM        <span style="color: #993399">0xFE</span>    <span style="font-style: italic"><span style="color: #9A1900">/* COM marker code */</span></span>
<a name="line1049">1049: </a>
<a name="line1050">1050: </a>
<a name="line1051">1051: </a><span style="font-style: italic"><span style="color: #9A1900">/* If we have a brain-damaged compiler that emits warnings (or worse, errors)</span></span>
<a name="line1052">1052: </a><span style="font-style: italic"><span style="color: #9A1900"> * for structure definitions that are never filled in, keep it quiet by</span></span>
<a name="line1053">1053: </a><span style="font-style: italic"><span style="color: #9A1900"> * supplying dummy definitions for the various substructures.</span></span>
<a name="line1054">1054: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line1055">1055: </a>
<a name="line1056">1056: </a><span style="font-weight: bold"><span style="color: #000080">#ifdef</span></span> INCOMPLETE_TYPES_BROKEN
<a name="line1057">1057: </a><span style="font-weight: bold"><span style="color: #000080">#ifndef</span></span> JPEG_INTERNALS          <span style="font-style: italic"><span style="color: #9A1900">/* will be defined in jpegint.h */</span></span>
<a name="line1058">1058: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jvirt_sarray_control <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1059">1059: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jvirt_barray_control <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1060">1060: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_comp_master <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1061">1061: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_main_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1062">1062: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_prep_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1063">1063: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_c_coef_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1064">1064: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_writer <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1065">1065: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_converter <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1066">1066: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_downsampler <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1067">1067: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_forward_dct <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1068">1068: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_entropy_encoder <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1069">1069: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_decomp_master <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1070">1070: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_main_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1071">1071: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_coef_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1072">1072: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_d_post_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1073">1073: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_input_controller <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1074">1074: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_marker_reader <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1075">1075: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_entropy_decoder <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1076">1076: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_inverse_dct <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1077">1077: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_upsampler <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1078">1078: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_deconverter <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1079">1079: </a><span style="font-weight: bold"><span style="color: #0000FF">struct</span></span> jpeg_color_quantizer <span style="color: #FF0000">{</span> <span style="color: #009900">long</span> dummy<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<a name="line1080">1080: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">/* JPEG_INTERNALS */</span></span>
<a name="line1081">1081: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">/* INCOMPLETE_TYPES_BROKEN */</span></span>
<a name="line1082">1082: </a>
<a name="line1083">1083: </a>
<a name="line1084">1084: </a><span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<a name="line1085">1085: </a><span style="font-style: italic"><span style="color: #9A1900"> * The JPEG library modules define JPEG_INTERNALS before including this file.</span></span>
<a name="line1086">1086: </a><span style="font-style: italic"><span style="color: #9A1900"> * The internal structure declarations are read only when that is true.</span></span>
<a name="line1087">1087: </a><span style="font-style: italic"><span style="color: #9A1900"> * Applications using the library should not include jpegint.h, but may wish</span></span>
<a name="line1088">1088: </a><span style="font-style: italic"><span style="color: #9A1900"> * to include jerror.h.</span></span>
<a name="line1089">1089: </a><span style="font-style: italic"><span style="color: #9A1900"> */</span></span>
<a name="line1090">1090: </a>
<a name="line1091">1091: </a><span style="font-weight: bold"><span style="color: #000080">#ifdef</span></span> JPEG_INTERNALS
<a name="line1092">1092: </a><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"jpegint.h"</span>              <span style="font-style: italic"><span style="color: #9A1900">/* fetch private declarations */</span></span>
<a name="line1093">1093: </a><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"jerror.h"</span>               <span style="font-style: italic"><span style="color: #9A1900">/* fetch error codes too */</span></span>
<a name="line1094">1094: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span>
<a name="line1095">1095: </a>
<a name="line1096">1096: </a><span style="font-weight: bold"><span style="color: #000080">#endif</span></span> <span style="font-style: italic"><span style="color: #9A1900">/* JPEGLIB_H */</span></span>
</tt>
</pre>
</body>
</html>
